%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Plantilla de memoria en LaTeX para la ETSIT - Universidad Rey Juan Carlos
%%
%% Por Gregorio Robles <grex arroba gsyc.urjc.es>
%%     Grupo de Sistemas y Comunicaciones
%%     Escuela Técnica Superior de Ingenieros de Telecomunicación
%%     Universidad Rey Juan Carlos
%% (muchas ideas tomadas de Internet, colegas del GSyC, antiguos alumnos...
%%  etc. Muchas gracias a todos)
%%
%% La última versión de esta plantilla está siempre disponible en:
%%     https://github.com/gregoriorobles/plantilla-memoria
%%
%% Para obtener PDF, ejecuta en la shell:
%%   make
%% (las imágenes deben ir en PNG o JPG)

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[a4paper, 12pt]{book}
%\usepackage[T1]{fontenc}

\usepackage[spanish, es-tabla]{babel}
\usepackage[a4paper, left=2.5cm, right=2.5cm, top=3cm, bottom=3cm]{geometry}
\usepackage{times}
\usepackage[latin1]{inputenc}
\usepackage[spanish]{babel} % Comenta esta línea si tu memoria es en inglés
\usepackage{url}
%\usepackage[dvipdfm]{graphicx}
\usepackage{graphicx}
\usepackage{subfig}
\usepackage[table]{xcolor}
\usepackage{float}  %% H para posicionar figuras
\usepackage[nottoc, notlot, notlof, notindex]{tocbibind} %% Opciones de índice
\usepackage{latexsym}  %% Logo LaTeX
\usepackage{listings} %% para poner codigo
\usepackage{pdfpages}
\usepackage[toc,page]{appendix}
\usepackage{acronym}

\title{Memoria del Proyecto}
\author{Nombre del autor}

\renewcommand{\baselinestretch}{1.5}  %% Interlineado

\begin{document}

\renewcommand{\refname}{Bibliografía}  %% Renombrando
\renewcommand{\appendixname}{Apéndice}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PORTADA

\begin{titlepage}
\begin{center}
\begin{tabular}[c]{c c}
%\includegraphics[bb=0 0 194 352, scale=0.25]{logo} &
\includegraphics[scale=0.25]{img/logo_vect.png} &
\begin{tabular}[b]{l}
\Huge
\textsf{UNIVERSIDAD} \\
\Huge
\textsf{REY JUAN CARLOS} \\
\end{tabular}
\\
\end{tabular}

\vspace{3cm}

\Large
INGENIERÍA EN SISTEMAS AUDIOVISUALES Y MULTIMEDIA

\vspace{0.4cm}

\large
Curso Académico 2016/2017

\vspace{0.8cm}

Trabajo Fin de Grado

\vspace{2.5cm}

\LARGE
CREACIÓN DE LA PLATAFORMA DR.PENCILCODE

\vspace{4cm}

\large
Autora: Sara Blázquez Calderay \\
Tutor : Dr. Gregorio Robles
\end{center}
\end{titlepage}

\newpage
\mbox{}
\thispagestyle{empty} % para que no se numere esta pagina


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Para firmar
\clearpage
\pagenumbering{gobble}
\chapter*{}

\vspace{-4cm}
\begin{center}
\LARGE
\textbf{Proyecto Fin de Carrera}

\vspace{1cm}
\large
CREACIÓN DE LA PLATAFORMA DR.PENCILCODE

\vspace{1cm}
\large
\textbf{Autora :} Sara Blázquez Calderay \\
\textbf{Tutor :} Dr. Gregorio Robles Martínez

\end{center}

\vspace{1cm}
La defensa del presente Proyecto Fin de Carrera se realizó el día \qquad$\;\,$ de \qquad\qquad\qquad\qquad \newline de 2017, siendo calificada por el siguiente tribunal:


\vspace{0.5cm}
\textbf{Presidente:}

\vspace{1.2cm}
\textbf{Secretario:}

\vspace{1.2cm}
\textbf{Vocal:}


\vspace{1.2cm}
y habiendo obtenido la siguiente calificación:

\vspace{1cm}
\textbf{Calificación:}


\vspace{1cm}
\begin{flushright}
Fuenlabrada, a \qquad$\;\,$ de \qquad\qquad\qquad\qquad de 2017
\end{flushright}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Dedicatoria

\chapter*{}
\pagenumbering{Roman} % para comenzar la numeracion de paginas en numeros romanos
\begin{flushright}
\textit{Dedicado a mis hermanos,\\
Alejandro y Nuria, os quiero.}
\end{flushright}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Agradecimientos

\chapter*{Agradecimientos}
%\addcontentsline{toc}{chapter}{Agradecimientos} % si queremos que aparezca en el índice
\markboth{AGRADECIMIENTOS}{AGRADECIMIENTOS} % encabezado 

No ha sido un camino fácil pero he de admitir que ésta ha sido una de las mejores y, a la vez, más difíciles etapas de mi vida. Creo que no podría haber elegido una carrera mejor con todo lo que ello conlleva. Durante todos estos años, he recibido el ánimo y el cariño de muchas personas a las que quiero agradecérselo infinitamente:

En primer lugar, quiero agradecer a mi familia, me siento afortunada por teneros a todos.
El mayor gracias se lo doy a mis padres que, desde pequeña, me han inculcado los valores que me han convertido en quien soy hoy. Mamá, me has enseñado a luchar por lo que quiero, a ser perseverante y a que ``todo ocurre por una razón'', de mayor quiero ser como tú. Papá, gracias por apoyarme tanto y haberme enseñado a tomarme la vida con un toque de humor Blázquez, no se que hubiera sido de mí sin eso. Sois las personas a las que más admiro del mundo, gracias por confiar en mi más que yo misma. Os quiero mucho.

A Carlos y a Marivi, que por diversas circunstancias, se han convertido en el segundo pilar fundamental de mi día a día. Gracias por saber escucharme y guiarme a lo largo de este recorrido. Os quiero.

A mis hermanos, Alex y Nuria, que siempre sacáis lo mejor de mí. Sois el regalo más grande que he podido tener y estar con vosotros me llena de felicidad. Os adoro.

Gracias a mis amigas de siempre, Cristina, Barbara y Cristina, que a pesar de seguir rumbos distintos y no vernos a menudo siempre han estado al pie del cañón, apoyándome cuando más lo necesitaba y soportando mis batallas.

También quiero agradecer a mis amigos de la universidad, sin los cuales, llegar hasta este punto no hubiera sido posible. Gracias, a Raquel y Alba, compañeras de estudio y de vida, por haberme levantado cuando ya no podía más y por haber luchado conmigo hasta el final. Estoy orgullosa de vosotras. A Luismo, Miguel, Diego y Diana por sacarme una sonrisa siempre que os veo. Sé que sois para siempre.

Gracias a mi segunda casa, Suecia, por haberme enseñado a ser independiente y a valorar aún más lo que se tiene, por darme la posibilidad de conocer a gente tan maravillosa que, en tan poco tiempo, me ha ayudado a crecer como persona y, por haberme enseñado grandes lecciones. Aunque estéis lejos siempre os llevo conmigo.

Por último, quiero dar las gracias a mi tutor, Gregorio Robles, por haber confiado en mí y haberme ofrecido la gran oportunidad de trabajar en este proyecto que, con el tiempo, espero seguir mejorando.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Resumen

\chapter*{Resumen}
%\addcontentsline{toc}{chapter}{Resumen} % si queremos que aparezca en el índice
\markboth{RESUMEN}{RESUMEN} % encabezado


En la actualidad, las nuevas tecnologías y la programación están ganando terreno en el área de la educación; la LOMCE añade una nueva competencia clave, la competencia digital, cuyo objetivo es ayudar a los alumnos a resolver de forma eficiente los problemas de la vida cotidiana mediante el uso de recursos tecnológicos y el uso de la programación.\newline

Dr. Pencilcode es una aplicación web de software libre y código abierto - enfocada a la enseñanza - que se encarga de realizar análisis estáticos de proyectos desarrollados con Pencil Code con la intención de impulsar la capacidad tecnológica y la creatividad de los usuarios.\newline

El objetivo principal de este proyecto es el de crear una plataforma inteligible y amigable con el fin de ayudar y dar soporte a usuarios que se están iniciando en el mundo de la programación, en especial a niños y profesores. Además, Dr. Pencilcode, trata de promover el desarrollo del pensamiento computacional y servir de motivación a los usuarios para fomentar su deseo de mejorar como programadores mediante el uso de puntuaciones y bonus.\newline

Las tecnologías front-end que más se han utilizado para el desarrollo de esta aplicación han sido CSS y HTML apoyándose en tecnologías como  Javascript, Bootstrap y jQuery para añadir dinamismo a la web y mejorar la interactividad y usabilidad de la herramienta. Por otro lado, la parte del servidor, se ha desarrollado principalmente con el framework Django además de otras tecnologías de gestión de bases de datos como MySQL.\newline
  
%% ¿algo de coffee-mastery?



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%% Resumen en inglés

\chapter*{Summary}
%\addcontentsline{toc}{chapter}{Summary} % si queremos que aparezca en el índice
\markboth{SUMMARY}{SUMMARY} % encabezado

Nowadays, new technologies and programming are spreading in the area of education, the LOMCE adds a new key competence - Digital Competence - whose objective is to help students to solve the problems of real life efficiently by using technological resources and programming.\newline

Dr. Pencilcode is a free software and open source web application -- focused on teaching -- which is responsible for performing static analysis of projects developed with Pencil Code in order to boost the technological capacity and creativity of users. \newline

The main objective of this project is to create an intelligible and friendly web platform in order to help and give feedback to users who are starting in the world of programming, specially kids and teachers. In addition, Dr. Pencilcode tries to promote computational thinking development and motivate users to encourage their desire to improve as programmers by using scores and bonuses. \newline


Some of the most used front-end technologies for the development of this application have been HTML and CSS combined with technologies such as JavaScript, Bootstrap and jQuery in order to add dynamism and improve the interactivity and usability of the web page. On the other hand, the server side has been developed mainly with the Django framework and other database management technologies like MySQL.\newline


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ÍNDICES %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Las buenas noticias es que los índices se generan automáticamente.
% Lo único que tienes que hacer es elegir cuáles quieren que se generen,
% y comentar/descomentar esa instrucción de LaTeX.

%%%% Índice de contenidos
\tableofcontents 


%%%%\addcontentsline{toc}{chapter}{Lista de figuras} % para que aparezca en el indice de contenidos


\chapter*{Acrónimos y abreviaturas}
\markboth{ACRÓNIMOS Y ABREVIATURAS}{ACRÓNIMOS Y ABREVIATURAS} % encabezado

\begin{acronym}

\acro{AJAX} {Asynchronous JavaScript and XML}

\acro{CSRF} {Cross-Site Request Forgery}

\acro{CSS} {Cascading Style Sheets}

\acro{DOM} {Document Object Mode}

\acro{FICOD} {Foro Internacional de Contenidos Digitales}

\acro{GSYC} {Grupo de Sistemas y Comunicaciones}

\acro{HTML} {HyperText Markup Language}

\acro{HTTP} {The Hypertext Transfer Protocol}

\acro{IEEE} {Institute of Electrical and Electronics Engineers}

\acro{JSON} {JavaScript Object Notation}

\acro{LaTeX} {Lamport TeX}

\acro{LOMCE} {Ley Orgánica para la mejora de la calidad educativa}

\acro{MIME} {Multipurpose Internet Mail Extensions}

\acro{MIT} {Massachusetts Institute of Technology}

\acro{MVC} {Model-View-Controller}

\acro{PDF} {Portable Document Format}

\acro{TCP/IP} {Transmission Control Protocol/Internet Protocol}

\acro{URJC} {Universidad Rey Juan Carlos}

\acro{URL} {Uniform Resource Locator}

\acro{WebGL} {Web Graphics Library}

\acro{XHTML} {Extensible Hypertext Markup Language}

\end{acronym}

%%%% Índice de figuras
\cleardoublepage
\listoffigures % indice de figuras

%%%% Índice de tablas
\cleardoublepage
%%%\addcontentsline{toc}{chapter}{Lista de tablas} % para que aparezca en el indice de contenidos
\listoftables % indice de tablas


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% INTRODUCCIÓN %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Introducción}
\label{sec:intro} % etiqueta para poder referenciar luego en el texto con ~\ref{sec:intro}
\pagenumbering{arabic} % para empezar la numeración de página con números
\section{Marco General}
\label{sec:marco-general}

Vivimos dentro de una sociedad en constante cambio y esto se debe, en gran medida, al desarrollo tecnológico que está teniendo lugar en los último años.
A consecuencia de la evolución, el ser humano debe adaptarse a lo que ésta demanda para poder seguir progresando y ofrecer, así, una buena educación.\newline
 

Con la introducción de las nuevas tecnologías y con el fin de mejorar la calidad educativa, la LOMCE, incorpora en las aulas la competencia digital. ``La competencia digital es aquella que implica el uso de las tecnologías de la información y la comunicación para alcanzar objetivos relacionados con el trabajo, la empleabilidad, el aprendizaje y la participación en la sociedad. Igualmente precisa del desarrollo de diversas destrezas relacionadas con el acceso a la información, el procesamiento, la creación de contenidos y la resolución de problemas, tanto en contextos formales como informales''. \cite{boe2015} \newline

Cada vez más, hay que concienciar a los niños de la importancia de la programación. Actualmente, se ha demostrado que con la programación se ayuda al desarrollo del pensamiento computacional, lo que contribuye al alcance de los objetivos fijados por la LOMCE pues el pensamiento computacional implica resolver problemas, diseñar sistemas y comprender el comportamiento humano, basándose en los conceptos fundamentales de la informática. \cite{Wing2006compthinking}\newline

Así mismo, en un futuro no muy lejano, se solicitará tener fundamentos de programación para la mayoría de los puestos de trabajo, por ello, poco a poco, se está introduciendo la programación en las aulas. Sin embargo, al tratarse de algo totalmente nuevo, no todos los docentes disponen de los conocimientos básicos de la programación; muchos de ellos deben hacer un triple esfuerzo, aprendiendo a programar, enseñando a su vez a los alumnos y evaluando los programas realizados por el alumnado.\newline

En cualquier ámbito, no solo en el educativo, es indispensable disponer de los recursos adecuados para poder realizar bien tu trabajo. Tanto los alumnos como los docentes necesitan la incorporación de nuevas herramientas capaces de desarrollar la competencia tecnológica y el pensamiento computacional y plataformas capaces de facilitar a los maestros todo el proceso que este cambio conlleva; es en este punto cuando surge Dr. Pencilcode.


\section{Marco de Referencia}
\label{sec:marco-referencia}


Para poder entender correctamente este proyecto, antes de introducirlo, hay que mencionar las dos herramientas en las que está basado: Scratch y Dr.Scratch.\newline

\textbf{Scratch} es en un lenguaje de programación formado por bloques y orientado a la enseñanza. Éste permite al usuario crear videojuegos, historias y animaciones sin necesidad de tener conocimientos - ni siquiera básicos - sobre programación, centrándose únicamente en la lógica del programa.\newline

Hace un par de años, en el Grupo de Sistemas y Comunicaciones (Gsyc) de la Universidad Rey Juan Carlos (URJC), brotó la iniciativa de crear una herramienta - \textbf{Dr. Scratch} - destinada a analizar proyectos Scratch y a aportar realimentación y soporte sobre los diferentes aspectos del Pensamiento Computacional para potenciar, de esta forma, el aprendizaje de la programación. \cite{mluz2016scratch}\newline

Tras el gran éxito que esto supuso, mi tutor en este proyecto, Gregorio Robles, tuvo la gran idea de extender este prototipo de herramienta educativa a otros lenguajes de programación. El primer candidato para implementar dicha idea fue \textbf{Pencil Code}, lenguaje que sigue la línea de Scratch en cuanto a programación con bloques.
Pencil Code soporta CoffeeScript como lenguaje principal y, además, ofrece la posibilidad de escribir tu propio código. Al tratarse de un lenguaje de programación de propósito general, el análisis de los proyectos Pencil Code será más complicado que el de los proyectos Scratch.\newline
 
La decisión de desarrollar la aplicación para este lenguaje de programación surgió gracias a Gregorio Robles, tras ponerse en contacto con el creador de Pencil Code, David Bau, y proponerle la idea. Debido a su indisponibilidad, David Bau\footnote{\url{http://davidbau.com/}}, tuvo la amabilidad de remitirnos a Yana Malysheva\footnote{\url{https://sites.google.com/site/yanamalportfolio/home/pencil-code}}, responsable de Pencil Code en Boston durante el año académico 2016/2017, con quien hemos intercambiado diferentes puntos de vista acerca de la web y hemos mantenido contacto durante toda la realización del proyecto.\newline

Dr. Pencilcode guarda el código de los programas en un JSON y analiza su contenido. La tarea de analizar toda la información del fichero JSON se atribuye al software \textit{coffee-mastery.py}, plugin que tuvo que desarrollarse en paralelo junto con Dr. Pencilcode para poder realizar dicho análisis.\newline

Por último, cabe destacar que la versión presentada en esta memoria no es más que
la version BETA de la aplicación; Dr. Pencilcode es un proyecto incipiente al que se le podría sacar mucho partido y que podría seguir creciendo exponencialmente con la inclusión de nuevas funcionalidades e ideas.
\newpage

\section{Estructura de la memoria}
\label{sec:estructura}

Con el fin de facilitar la lectura de la memoria, se incluye esta sección donde se detalla la estructura de la misma y el contenido que se trata en cada uno de sus capítulos: 

\begin{itemize}

  \item \textbf{Introducción:} En este apartado, entre otras cosas, se enmarca y contextualiza el proyecto y se indica como surgió Dr. Pencilcode.
    
  \item \textbf{Objetivos:}  Capítulo en el que se determinan los objetivos generales y específicos que fueron fijados durante el desarrollo del proyecto y, además, se explica la planificación temporal del mismo.

  \item \textbf{Estado del arte:} En esta sección se enumeran las tecnologías y la arquitectura utilizada en el desarrollo del proyecto realizando una breve descripción de cada una de ellas.
 
  \item \textbf{Diseño e implementación:} En este capítulo se explica como funciona la web; se habla de la arquitectura general de la herramienta y de su diseño e implementación. Así mismo, se indican las nuevas funcionalidades y modificaciones realizadas con respecto a Dr. Scratch.
  
  \item \textbf{Resultados:} Con el fin de aclarar lo que Dr. Pencilcode puede ofrecer y aportar al usuario, en este apartado, se realiza un análisis detallado de varios proyectos como ejemplo.
   
  \item \textbf{Conclusiones:} Aquí se habla sobre la consecución de los objetivos indicados con anterioridad en la memoria. Además, se comentan los conocimientos adquiridos durante el desarrollo de Dr. Pencilcode y qué funcionalidades podrían añadirse en el futuro para mejorar la plataforma. Finalmente, se incluye una valoración personal sobre el proyecto.
  
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% OBJETIVOS %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Objetivos}
\label{chap:objetivos}

Uno de los aspectos más importantes a la hora de emprender un proyecto es la fijación de los objetivos. Para que un proyecto sea exitoso y cubra las necesidades deseadas hay que tener claro qué es lo que se quiere conseguir y cuales son nuestras metas.
En este apartado se explican cuales han sido los objetivos iniciales de este proyecto y cual ha sido la planificación temporal del mismo.


\section{Objetivo general}
\label{sec:objetivo-general}

El objetivo principal de este proyecto es crear una aplicación web educativa capaz de incentivar a los alumnos y profesores a seguir mejorando sus habilidades como programadores a la par que desarrollan su pensamiento computacional.\newline

Además, la finalidad de la plataforma es evaluar los programas creados con Pencil Code, mostrar los resultados obtenidos tras el análisis en un \emph{dashboard} y aportar soporte y retroalimentación a los usuarios.\newline

Con este proyecto se pretende transmitir ciertos valores como la perseverancia, el superarse a sí mismo, y el querer seguir aprendiendo. Es una forma más atractiva de aprender a programar y de transmitir que la programación puede llegar a ser muy divertida.\newline

En definitiva, se pretende adaptar la página Dr. Scratch al entorno Pencil Code - teniendo en cuenta que es un lenguaje de propósito general, mucho más complejo que Scratch - y hacer entender que se trata de una herramienta para aprender, no sólo evaluar.


\section{Objetivos específicos}
\label{sec:objetivos-especificos}

Como se ha mencionado anteriormente, Dr. Pencilcode sigue los pasos de Dr. Scratch. Al comienzo de este proyecto ya existía una versión avanzada de Dr.Scratch en la web; partiendo de esto, cabe destacar que los objetivos principales fueron:

\begin{enumerate}

\item \textbf{Adaptación de la implementación básica a Pencil Code}. El primer objetivo consistió en añadir y modificar código de Dr. Scratch para conseguir adaptar la página web a las necesidades de Pencil Code. 

\item Para realizar esta adaptación fue necesaria la \textbf{creación de un Plugin} - Coffee-Mastery - capaz de analizar proyectos Pencil Code. Éste debería asignar una puntuación en función del grado de maestría de programación del usuario en las diferentes categorías disponibles: Move, Art, Text, Control, Sound y Operators.

\item Añadir \textbf{nuevas funcionalidades} y secciones a la página web - orientadas a Pecil Code - con el objetivo de seguir mejorando la plataforma.

\item \textbf{Aplicación en producción}. El siguiente paso, una vez conseguido el funcionamiento de la web, era tener la página en producción para que pudiera ser utilizada por cualquier usuario y estos pudieran dar retroalimentación y ayudar a mejorar la herramienta. Como Yana era la reponsable de los talleres Pencil Code en Bostón, la idea principal era que sus alumnos fueran los que probaran primero nuestra aplicación.

\end{enumerate}

Para lograr alcanzar estos objetivos fue necesaria la realización de un serie de pasos aún más específicos como:

\begin{itemize}

\item Diseñar una rúbrica para evaluar los proyectos creados con Pencil Code.

\item Analizar proyectos Pencil Code mediante URL.

\item Mejorar la página mostrada tras el análisis de un proyecto e incluir más dinamismo y elementos visuales con el objetivo de conseguir mayor inteligibilidad por parte del usuario.

\item Añadir bonus en las puntuaciones - incluyendo estrellas en el dashboard - por complejidad, por diversidad, por bloques duplicados, por uso de todas las categorías.

\item Incluir una sección donde se indiquen los bloques utilizados en cada una de las categorías de Pencil Code, así como una explicación de los bonus obtenidos.

\item Incluir una sección donde dar consejos para que los usuarios puedan mejorar sus proyectos y puntuaciones.

\item Crear un formulario para poder recibir retroalimentación - feedback - de los usuarios guardando sus respuestas en la base de datos.

\item Eliminar la puntuación máxima con el fin de motivar a los programadores a seguir mejorando y evitar que piensen que hay un límite o que se conformen con la mayor puntuación.

\item Diseñar seis páginas, una por cada categoría, incluyendo ejemplos de como mejorar el programa Pencil Code y como utilizar los bloques de la categoría seleccionada, dando soporte al usuario.

\item Añadir tres nuevas páginas explicando los bloques que se pueden utilizar en cada categoría, la obtención de las puntuaciones y la adquisición de los bonus.

\item Configurar un Servidor HTTP Apache donde poder subir la aplicación web.

\end{itemize}

\section{Planificación temporal}
\label{sec:estructura}

Al igual que la mayoría de proyectos, el desarrollo de Pencil Code ha supuesto numerosas horas de trabajo. Se trata de un proyecto desarrollado únicamente por mí, junto con el soporte de mi tutor, Gregorio Robles, y la retroalimentación de Yana Malysheva. Este proyecto abarca una duración aproximada de dos años (cursos académicos) pudiéndo dividirse en dos fases principales.\newline


\textbf{FASE I o Fase de Aprendizaje}:  engloba el primer año del proyecto, desde noviembre de 2015 hasta mayo de 2016. Antes de comenzar a desarrollar cualquier proyecto, lo mejor es conocer su contexto, documentarse, ordenar las ideas y entender el propósito general del mismo.  
Este periodo lo dediqué, exclusivamente, a comprender el funcionamiento de Dr. Scratch, lo que no fue tarea fácil pues una de las tecnologías pilares de Dr. Scratch es el framework web Django que, hasta la fecha, era un campo totalmente desconocido para mí. A raíz de esto, estuve una temporada documentándome e informándome sobre Django para poder entender el mecanismo de la web.\newline

Así mismo, con el fin de involucrarme aún más, tuve la oportunidad de trabajar con MariLuz Aguado y Eva Hu, desarrolladoras de la herramienta Dr.Scratch,  quienes me guiaron en mi comienzo con MySQL, Apache y Django. Junto a ellas, realicé varios talleres Scratch, los cuales me mostraron la importancia de introducir la programación a edades más tempranas y lo satisfactorio que resulta enseñar y ayudar en lo que a ti más te gusta.
En esta etapa los objetivos que se fijaron fueron los siguientes:

\begin{itemize}

\item Comprender el código que conforma la web de Dr.Scratch.
\item Aprender a utilizar nuevas tecnologías como Django, MySQL y Apache.
\item Configuración de la máquina virtual para Dr. Pencilcode e instalación de Apache Server.
\item Ponerme en situación contextualmente hablando.

\end{itemize}

\textbf{FASE II o Fase de Desarrollo}: este periodo abarca desde Octubre de 2016, como fecha de inicio, hasta Marzo de 2017, fecha en la que comencé a redactar esta memoria.
Fue en esta fase donde conseguimos ponernos en contacto con Yana Malysheva con quien intercambiamos diferentes ideas y opiniones vía e-mail. A partir de aquí, comencé con el desarrollo completo de la web manteniéndola activa en el servidor.
Los objetivos que se establecieron en esta fase fueron, prácticamente, todos los mencionados en el apartado de \textit{Objetivos específicos}.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ESTADO DEL ARTE %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Estado del arte}

En esta sección se realizará una breve explicación de las bases tecnológicas, arquitecturas y protocolos más significativos en las que está basado este proyecto.

\section{Modelo Cliente-Servidor}
\label{sec:cliente-servidor}

El término cliente-servidor aparece en diferentes contextos dentro de la informática, uno de ellos es la arquitectura de red conocida como \textit{Arquitectura Cliente-Servidor} \cite{Liu2004dis} y utilizada en este proyecto. Se trata de un modelo para aplicaciones distribuidas - formadas por distintos elementos que se ejecutan en diferentes entornos - en el que las tareas se reparten entre clientes y servidores. Estos dos componentes interaccionan entre sí mediante peticiones y respuestas.

\begin{itemize}

\item \textbf{Cliente}: es la parte encargada de solicitar las peticiones al servidor, esperar y recibir sus repuestas. Mediante una interfaz gráfica de usuario, el cliente, interactúa de forma directa con los usuarios.
\item \textbf{Servidor}: funciona como proveedor de servicios, compartiendo sus recursos con los clientes. Éste espera la llegada de las peticiones, las procesa y, posteriormente, envía una respuesta a los clientes.

\end{itemize}

El objetivo de la arquitectura cliente-servidor es proporcionar servicios que permitan compartir recursos a los usuarios de red.

\begin{figure}[H]
   \centering
   \includegraphics[width=11.5cm, keepaspectratio]{img/arquitecturaCS.png}
   \textit{\caption{Arquitectura Cliente-Servidor}}
   \label{figura:Architecture}
\end{figure}

La arquitectura de software de una aplicación distribuida, o una aplicación cliente-servidor, se puede dividir en tres capas: capa de presentación (\textit{front-end}), capa de lógica de aplicación y capa de servicio (\textit{back-end}). 

En los siguientes puntos de la memoria se explicarán los términos front-end y back-end y se hará hincapié en las tecnologías utilizadas en cada una de las capas. 

%%La capa de negocio contiene la lógica principal de procesamiento de datos de aplicación Web. 

\section{HTTP}
\label{sec:HTTP}

\textbf{Hypertext Transfer Protocol}, conocido por su abreviatura HTTP, es el protocolo de comunicación utilizado por los usuarios de la \textit{Word Wide Web} para transferir documentos hypermedia y, por tanto, el protocolo usado en el modelo Cliente-Servidor para el intercambio de mensajes entre sus componentes. 

Los mensajes HTTP son de \textbf{texto plano} y, generalmente, se estructuran en tres secciones~\cite{Brian2002http}: 

\begin{itemize}

\item \textbf{Línea inicial}: ésta es diferente para peticiones y respuestas. Su labor es la de describir el mensaje especificando el recurso que se solicita, indicando el método y la versión HTTP utilizada, etc.

\item \textbf{Línea de cabecera}: Incluye información adicional -metadatos- sobre los mensajes de petición y respuesta. Los datos sueles ser listas de atributos con forma \textit{nombre:valor}. La cabecera acaba con una línea en blanco.

\item \textbf{Cuerpo (opcional)}: contiene cualquier tipo de datos. Los cuerpos de las peticiones llevan información al servidor, mientras que los de las respuestas llevan la información de vuelta al cliente. A diferencia de la línea inicial y la cabecera, el cuerpo puede incluir datos binarios (audio, imágenes, vídeo, etc) además de texto.

\end{itemize}

En las solicitudes HTTP se pueden incluir una serie de métodos ya predefinidos. Los métodos se encuentran en la línea de inicio e indican al servidor la acción que debe realizar sobre el recurso indicado. Entre los más utilizados en este proyecto se encuentran:

\begin{enumerate}

\item \textbf{GET}: solicita un objeto al servidor especificando su URL. Los datos son visibles por cualquier usuario. 

\item \textbf{POST}: este método envía datos al servidor - normalmente los introducidos en un formulario, ocultos al usuario. Los datos van en el cuerpo del mensaje. 

\end{enumerate}

Los mensajes enviados por el servidor incluyen un código de respuesta. Éste informa al cliente sobre el estado de la solicitud, si ha tenido éxito o si se requiere alguna otra acción. Los más comunes son: \textbf{200 - OK} o \textbf{404 - Not Found} entre otros.
 
\begin{figure}[H]
   \centering
   \includegraphics[width=14cm, keepaspectratio]{img/HTTP.png}
   \textit{\caption{Modelo mensajes HTTP}}
   \label{figura:http}
\end{figure}

\section{Frontend}
\label{sec:frontend}

El front-end es la capa de presentación de cualquier página o aplicación web. Situada en el lado del cliente, ésta se centra en el diseño de la interfaz con el propósito de que el usuario sea capaz de interactuar con ella de una forma más sencilla, cómoda e intuitiva.

Las tecnologías más utilizadas para desarrollar el front-end de este proyecto han sido las enumeradas a continuación:\newline


\begin{figure}[H]
   \centering
   \includegraphics[width=12cm, keepaspectratio]{img/front-end.png}
   \caption{Tecnologías utilizadas en el front-end}
   \label{figura:front-end}
\end{figure}


\subsection{HTML}
HTML \cite{jav2008html} - en inglés, HyperText Markup Language - es un lenguaje de etiquetas, también denominado lenguaje de marcado, con el que se pueden crear páginas y aplicaciones web. A través de las marcas o etiquetas, HTML permite dar estructura al texto dividiéndolo en secciones y párrafos, además de incorporar contenido multimedia en sitios web. Actualmente, se trata del estándar más utilizado por todos los navegadores.\newline

En general, por cada elemento, es necesario añadir una etiqueta de apertura junto con su respectiva etiqueta de cierre, ésta última no siempre necesaria. El contenido mostrado en la página será el escrito entre dichas etiquetas. Las etiquetas de apertura pueden incluir atributos, que proporcionan información adicional sobre el contenido del elemento.\newline

Las páginas HTML se suelen dividir en dos secciones principales: la cabecera y el cuerpo, ambas partes delimitadas por sus correspondientes etiquetas $<$head$>$$<$/head$>$ y $<$body$>$$<$/body$>$.
En la cabecera se incluye información relevante, no visible para el usuario, sobre la página web, como metadatos, enlaces a documentos externos o información acerca del estilo de la página, mientras que en el cuerpo se incorpora todo el contenido que el usuario puede ver en pantalla como texto y multimedia.\newline

A continuación se muestra cómo sería la estructura básica de un archivo HTML: \newline

\begin{figure}[H]
   \centering
   \includegraphics[width=14cm, keepaspectratio]{img/ejemplohtml.png}
   \caption{Documento básico de HTML}
   \label{figura:basic-html}
\end{figure}

\subsection{CSS}

Las Hojas de estilo en cascada \cite{jav2008css} - cuyas siglas en inglés significan Cascading StyleSheets - describen como los elementos de un documento escrito en lenguaje de marcado, por ejemplo HTML, deberían ser mostrados o presentados en pantalla. Se utiliza principalmente para el diseño visual de la interfaz de usuario de páginas web, mejorando, así, su apariencia. \newline

A pesar de que en los documentos HTML se puede definir el estilo de sus contenidos no es nada recomendable debido al costoso mantenimiento que esto acarrea. CSS tiene como objetivo marcar la separación del contenido del documento y la forma de presentación o aspecto de éste.\newline

CSS consiste en un conjunto de reglas o normas. Para indicar qué norma de estilo debe seguir un elemento HTML, dicho elemento debe identificarse con un atributo de tipo id o class que también será indicado en la regla que se le quiera aplicar.
Otra opción sería indicar la etiqueta deseada seguida de las reglas de estilo que se quieran incluir.\newline

Algunas ventajas de utilizar CSS en nuestra web son:

\begin{itemize}
\item Compatibilidad con distintos dispositivos: mayor flexibilidad de adaptación a las diferentes plataformas, e.g, dispositivos móviles, impresoras, ordenadores, etc. 

\item Reducción de la complejidad del documento HTML, evitando la repetición de código fuente.

\item Consistencia y ahorro de tiempo: Es aconsejable escribir el código CSS en un documento separado del código HTML. CSS ofrece la posibilidad de aplicar el mismo estilo, escrito en un documento externo .css, a diferentes archivos HTML y múltiples páginas web. 
\end{itemize}

Independientemente de como se quieran aplicar las normas de estilo, es necesario incluir en el HTML la etiqueta $<$link$>$ para hacer referencia al documento css que se va a utilizar. 

\begin{figure}[H]
 \centering
  \subfloat[html]{
   \label{f:htmlcss}
    \includegraphics[width=0.6\textwidth]{img/css.png}}
  \subfloat[css]{
   \label{f:css}
    \includegraphics[width=0.35\textwidth]{img/css2.png}}
 \caption{Ejemplo de aplicación de estilo CSS}
 \label{f:animales}
\end{figure}

\subsection{JavaScript}

JavaScript \cite{jav2008js}, conocido comúnmente como JS, es un lenguaje de programación interpretado orientado a objetos que se utiliza principalmente para añadir dinamismo a las páginas web. A pesar de su similitud con el nombre del lenguaje de programación Java, no debe confundirse con éste ya que ambos tienen finalidades muy diferentes.\newline

Proporciona al usuario un mayor control sobre el navegador, además de añadir mejoras en la interfaz, dotando a la web de una mayor usabilidad, interactividad y navegabilidad.

Usado generalmente en el lado del cliente, JavaScript también es utilizado, junto con otras tecnologías o herramientas, para enviar y recibir información del servidor.


\subsection{jQuery}

jQuery es una biblioteca de JavaScript de código abierto y software libre que permite simplificar y facilitar el uso de este lenguaje en nuestra página web.\newline
 
Entre las numerosas funcionalidades que jQuery ofrece, una de las más importantes es la manipulación del árbol DOM (Document Object Model). Mediante el uso de las funciones \textbf{jQuery()} o \textbf{\textdollar()} es posible modificar el contenido de la web sin tener que recargarla. \newline

El DOM es una representación de todos los elementos que conforman una página web. Sigue una estructura en forma de árbol donde los elementos de XHTML, denominados nodos, están interconectados, especificando la relación que existe entre cada uno de ellos. jQuery simplifica la sintaxis para encontrar, seleccionar y manipular dichos elementos DOM.\newline


\begin{figure}[H]
   \centering
   \includegraphics[width=10.5cm, keepaspectratio]{img/DOM.png}
   \caption{Document Object Model}
   \label{figura:DOM}
\end{figure}


Otras características de esta biblioteca multiplataforma son:

\begin{itemize}

\item Eventos HTML
\item Manipulación de CSS.
\item Animaciones y efectos.
\item AJAX.

\end{itemize}

\subsection{Bootstrap}

Bootstrap\footnote{\url{http://getbootstrap.com/}} es uno de los frameworks más conocidos para la creación de páginas web. Desarrollado por Twitter, Bootstrap contiene plantillas basadas en HTML y CSS que facilitan la implementación del diseño web, así como extensiones adicionales de JavaScript. Su principal finalidad es convertir el desarrollo del front-end en una tarea más sencilla, rápida y eficaz.

Algunas de las características que hacen de Bootstrap una herramienta tan popular entre los desarrolladores web son las mencionadas a continuación:


\begin{itemize}

\item Se trata de una herramienta de código abierto, disponible en GitHub\footnote{\url{https://github.com/twbs/bootstrap}} de forma gratuita.
\item Tiene compatibilidad con la mayoría de los navegadores web.
\item Desde la versión 2.0, soporta diseño web responsive. Esta funcionalidad favorece la adaptación dinámica de la interfaz al tamaño del dispositivo (ya sean tablets, teléfonos móviles, pantallas de ordenador, etc) que se esté utilizando para acceder al sitio web.
\item Incluye Grid system, útil para diseñar y maquetar por columnas. Este sistema permite añadir hasta un total de 12 columnas en la página.

\end{itemize}

\newpage

\section{Backend}
\label{sec:backend}

El back-end de una página web, también denominado capa de acceso a datos, se ejecuta en el lado del servidor. Éste es el encargado de analizar los datos de entrada del front-end y de realizar acciones tales como cálculos, procesamiento de la información, gestión de ficheros, interacciones de bases de datos, rendimiento, etc.
  
Las tecnologías elegidas en esta capa para desarrollo del proyecto han sido:

\begin{itemize}

\item \textbf{Python} como lenguaje de programación.
\item \textbf{Django} como framework para la creación del sitio web.
\item \textbf{MySQL} como base de datos.
\item \textbf{CoffeLint} como analizador de código CoffeScript.
\item \textbf{Servidor HTTP Apache} 

\end{itemize}

\subsection{Django}

Escrito en el lenguaje de programación Python, \textbf{Django}, es un framework de software libre y código abierto enfocado al desarrollo web que tiene como objetivo ayudar al programador a crear aplicaciones web complejas de una manera más rápida y clara.\newline

Sigue el patrón de arquitectura de software llamado \textbf{Modelo-Vista-Controlador} o MVC, éste divide la aplicación en tres partes interconectadas entre sí con el fin de separar la representación de información y la forma en la que la información es presentada y aceptada por el usuario (interacción con el usuario). 

\begin{enumerate}

\item \textbf{Modelo}: es el componente principal del patrón. Gestiona el acceso y procesamiento de datos. Las peticiones para acceder a la base de datos se realizan a través del Controlador.

\item \textbf{Vista}: se encarga de presentar al usuario la información disponible en un formato adecuado (generalmente como interfaz de usuario, página HTML) para que éste pueda interactuar con ella. Dicha información se obtiene a través del Modelo.

\item \textbf{Controlador}: esta capa se encarga de gestionar y responder las solicitudes realizadas por el usuario apoyándose tanto en el Modelo como en la Vista.

\end{enumerate}

En el caso de Django, el patrón de diseño sigue la estructura mostrada a continuación: \newline

\begin{figure}[H]
   \centering
   \includegraphics[width=14cm, keepaspectratio]{img/django.png}
   \caption{Patrón de diseño MVC de Django}
   \label{figura:MVC-django}
\end{figure}


Algunas otras características de Django son:

\begin{itemize}

\item \textbf{Seguro}. Django tiene muy en cuenta la seguridad y ayuda a los desarrolladores a evitar errores como cross-site scripting y cross-site request forgery (CSRF).
\item \textbf{Rápido y eficaz}. Django fue diseñado para ayudar a los desarrolladores a crear sitios web lo más rápido posible.
\item Sigue el principio de desarrollo de software \textbf{Don't Repeat Yourself} para evitar, así, la repetición de código.
\item Soporta diferentes \textbf{bases de datos} entre las cuales están: PostgreSQL, MySQL, Oracle o SQLite.
\item \textbf{Multiplataforma}: interopera en diversas plataformas informáticas. 

\end{itemize}


\subsection{Python}

Desarrollado por Guido van Rossum a finales de los ochenta y con el objetivo de mejorar y ampliar las funcionalidades del \textit{lenguaje de programación ABC}, \textbf{Python}, es un lenguaje de programación de alto nivel, interpretado y orientado a objetos que se caracteriza por su concisión, legibilidad y transparencia.
Debe su nombre a los humoristas británicos \textit{Monthy Python}.\newline

Python ofrece un amplio abanico de posibilidades, desde la programación web tanto en el lado del cliente como del servidor (Django), hasta la programación con bases de datos. Es considerado como uno de los lenguajes más populares en lo que al mundo de Open Source se refiere.

Se conocen tres versiones, 1.X, 2.X y 3.X, la primera de ellas obsoleta, cuyos últimos lanzamientos han sido las versiones 1.6, 2.7 y 3.4 respectivamente. Desde la versión 2.1, Python posee una licencia compatible con \textit{GNU General Public License}, denominada \textbf{Python Software Foundation License}, además, desde entonces, Python Software Foundation es la fundación sin ánimo de lucro responsable del código del lenguaje y de procesos como la administración de los derechos de autor y la obtención de fondos para la comunidad Python. \newline
% derechos de propiedad intelectual

Las características más significativas de este lenguaje son:

\begin{itemize}

\item \textbf{Orientado a objetos}: todo son objetos.
\item \textbf{Multiplataforma}: al igual que Django, se puede implementar en diferentes plataformas informáticas.
\item \textbf{Open Source}.
\item \textbf{Interpretado}: el código se ejecuta directamente mediante un interprete, siendo innecesaria la compilación previa del programa a código máquina. 
\item \textbf{Multiparadigma}: soporta el uso de dos o más paradigmas de programación. Python es orientado a objetos, imperativo, reflexivo y funcional.
\item \textbf{Fuertemente tipado}: si lo tipos no son exactamente iguales, no es posible pasar una variable como parámetro de procedimiento. Se debe realizar una conversión con anterioridad para que coincidan.
\item \textbf{Librerías}: Hay cantidad de librerías disponibles para ampliar la funcionalidad de Python.
\item \textbf{Case sensitive}: sensible a mayúsculas y minúsculas.

\end{itemize}

Python está ganando terreno. Fue situado en tercera posición por el IEEE en el \textit{ranking} de los lenguajes de programación más populares del 2016\footnote{\url{http://spectrum.ieee.org/computing/software/the-2016-top-programming-languages}}. 

\subsection{Servidor HTTP Apache}

El Servidor HTTP Apache\footnote{\url{https://httpd.apache.org/es}} es el servidor web más utilizado del mundo. Fue desarrollado por una comunidad de usuarios bajo supervisión de la \textit{Apache Software Foundation} dentro del proyecto HTTP Server (httpd). El objetivo es ofrecer un servidor fiable, eficiente y flexible que ofrezca servicios HTTP.

Como cualquier otro servidor, la función principal de Apache es almacenar, procesar y entregar páginas web, estáticas y dinámicas, a los clientes.

Apache soporta el protocolo HTTP/1.1 y su arquitectura es modular, se compone de un núcleo en el que se encuentra el código fuente y una serie de módulos que amplían la funcionalidad básica. Cualquier usuario podría escribir un módulo para realizar una función específica. Agregar y eliminar módulos es una gran ventaja ya que, con ello, se puede compilar un servidor Apache diseñado específicamente bajo las exigencias del usuario para el desarrollo de su sitio Web~\cite{Kabir2003apache}.

Una gran característica del servidor HTTP Apache es que es una tecnología de software libre y de código abierto, además de multiplataforma.


\subsection{Mysql}

En la actualidad, el uso de bases de datos es esencial para que los sitios web puedan recopilar información de una forma más eficiente, por ello, es necesario un sistemas gestor que se encargue del almacenamiento, recuperación y administración de datos.\newline

\textbf{MySQL} es un sistema de gestión de base de datos relacional desarrollado por \textit{Oracle Corporation}. Se trata, junto con Oracle y Microsoft SQL Server, de uno de los sistemas de gestión de bases de datos más populares y más utilizados en el ámbito mundial, como se puede observar en la \textit{Figura~\ref{figure:mysql}}\footnote{\url{https://db-engines.com/en/ranking}}.

\begin{figure}[H]
   \centering
   \includegraphics[width=16cm, keepaspectratio]{img/ranking.png}
   \caption{Ranking de sistemas de gestión de base de datos}
   \label{figure:mysql}
\end{figure}


Algunas característica de MySQL son:
 

\begin{itemize}
\item Diseñado para ser \textbf{multihilos}, capaz ejecutar múltiples hilos de ejecución, usando hilos kernel. 

\item Soporta gran cantidad de datos, hasta 50 millones de registros.
\item Es \textbf{rápido} y \textbf{fácil} de usar.
\item Los clientes usan sockets TCP/IP para conectarse al servidor MySQL.
\item Es \textbf{fiable}, ofrece fuerte protección de datos mediante sistemas de contraseñas y privilegios.
\item Es \textbf{multiplataforma}, se puede implementar en distintas plataformas informáticas\footnote{\url{https://www.mysql.com/support/supportedplatforms/database.html}}.\end{itemize}

\pagebreak

\subsection{CoffeeLint}
CoffeLint es un analizador estático de programas escritos en CoffeScript, se trata de un software de código abierto\footnote{\url{https://github.com/clutchski/coffeelint}} bajo la licencia MIT (Massachusetts Institute of Technology) que puede instalarse vía línea de comandos. Éste se encarga de comprobar que el programa sea consistente, limpio y esté correctamente escrito.

\begin{figure}[H]
 \centering
  \subfloat[Programa Coffeescript]{
   \label{f:Coffeescript}
    \includegraphics[width=0.5\textwidth]{img/coffeescript.png}}
  \subfloat[Análisis]{
   \label{f:css}
    \includegraphics[width=0.4\textwidth]{img/coffeelint.png}}
 \caption{Análisis con CoffeeLint}
 \label{f:animales}
\end{figure}

Por defecto, CoffeLint asegura que el programa esté escribiendo en CoffeScript idiomático, sin embargo, todas las reglas son opcionales y configurables, por lo que se pueden modificar para adaptarse a las necesidades o estilo de programación del usuario.

\newpage
\section{Pencil Code}
\label{sec:pencilcode}

Pencil Code\footnote{\url{https://pencilcode.net/}} es una aplicación web desarrollada, en su mayoría, por David Bau, miembro del equipo educativo de Google. Orientada en su totalidad a la enseñanza, Pencil Code trata de introducir a sus usuarios al mundo de la programación de una manera más fácil y sencilla, fomentando así la creatividad y el razonamiento.\newline

\begin{figure}[H]
   \centering
   \includegraphics[width=4cm, keepaspectratio]{img/logo-pencilcode.png}
   \textit{\caption{Logo de Pencil Code}}
   \label{figura:logo}
\end{figure}

Se trata de un proyecto open source que soporta CoffeeScript como lenguaje principal además de otros lenguajes como Javascript, HTML y CSS.
Fue diseñado con el objetivo de ser lo suficientemente flexible y simple para ser usado tanto por principiantes como por profesionales.

Con ayuda de un editor, Pencil Code permite dibujar, tocar música, crear juegos e historias así como experimentar con funciones matemáticas, geometría, algoritmos, simulaciones e incluso páginas web.\newline

La pantalla de la web está dividida en dos partes, en la mitad izquierda se encuentra el código fuente mientras que en la derecha se muestra la salida del programa.
Pencil Code ofrece la posibilidad de programar de dos formas diferentes, usando bloques o escribiendo código. Mientras que los programadores avanzados optan por escribir en los lenguajes estándar Javascript, CoffeeScript y HTML, los principiantes, pueden editar esos mismos lenguajes haciendo uso de bloques. 
Para poder programar a tu gusto, Pencil Code tiene habilitados dos botones, uno de ellos para seleccionar el lenguaje en el que quieres trabajar y el otro para pasar de la programación con bloques a texto y viceversa.\newline

\begin{figure}[H]
   \centering
   \includegraphics[width=15cm, keepaspectratio]{img/programa-pc.png}
   \textit{\caption{Programa creado con Pencil Code.}}
   \label{figura:ejemploprograma}
\end{figure}

Pencil Code consta de ocho categorías - identificadas con diferentes colores - donde se encuentran los bloques que se pueden utilizar para crear nuestro programa. 
Arrastrando y uniendo las piezas - como si fuera un puzzle - se va dando forma y añadiendo instrucciones a éste.
Entre las ocho categorías, mencionadas anteriormente, se encuentran: Move, Art, Text, Sound, Control, Operators, Stripes y Snippets.
 
\begin{enumerate}

\item \textbf{Move}: Encargada del movimiento, rotación, velocidad y visibilidad de la tortuga que aparece por defecto al empezar un programa.

\item \textbf{Art}: Con los bloques de esta categoría - encargada de la parte visual - se puede dibujar usando diferentes técnicas e incluso incluir imagenes en el programa que, posteriormente, serán mostradas por pantalla.

\item \textbf{Text}: Esta categoría añade texto a nuestro programa y campos de entrada donde el usuario puede introducir/escribir información.

\item \textbf{Sound}: Permite reproducir tonos y notas musicales además de archivos de audio.

\item \textbf{Control}: Las estructuras o sentencias de control se encargan de controlar el flujo del programa. Éstas modifican el orden de ejecución del programa, tomando decisiones o repitiendo un proceso varias veces. La categoría \textit{Control} también contiene bloques que permiten añadir interactividad con el usuario.

\item \textbf{Operators}: En esta categoría se encuentran los bloques relacionados con aritmética, trigonometría, expresiones lógicas, funciones, etc.

\item \textbf{Stripes} y \textbf{Snippets}: Muestran fragmentos de bloques ya creados - como referencia - para que se puedan añadir al programa. 

\end{enumerate}

\begin{figure}[H]
   \centering
   \includegraphics[width=12cm, keepaspectratio]{img/categorias.PNG}
   \textit{\caption{Categorías de Pencil Code}}
   \label{figura:categorias}
\end{figure}

Cualquier programa creado con Pencil Code es público por lo que puede ser visto, compartido y copiado por cualquier usuario. De esta forma, es posible aprender a programar apoyándose en proyectos realizados por otros usuarios además de colaborar y aportar tus ideas a los mismos.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% DISEÑO E IMPLEMENTACIÓN %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Diseño e implementación}

Como ya se ha mencionado en varias ocasiones, Dr. Pencilcode se basó en Dr. Scratch. Para poder realizar este proyecto, primero tuve que entender como funcionaba la aplicación de Dr. Scratch y, para ello, también tuve que aprender a utilizar Django.

Dr. Pencilcode ha ido evolucionando con el paso del tiempo gracias a la colaboración de mi tutor, Gregorio Robles, y Yana Malysheva, responsable de Pencil Code en Boston.\newline

En este capítulo se explicará la arquitectura general de la plataforma y las distintas fases por las que ha pasado el proyecto, centrándome únicamente en la última versión para detallar las funcionalidades de la aplicación.


\section{Arquitectura general} 
\label{sec:arquitectura}

Todo lo que se explica en los siguientes apartados se encuentra disponible en la web gracias a la máquina virtual que me proporcionó la universidad Rey Juan Carlos;
en ella tuve que instalar Apache, lo que me llevo un tiempo, para poder gestionar la aplicación. Actualmente, la web se puede encontrar con el dominio \url{http://drpencilcode.libresoft.info/} o con la IP \url{http://193.147.79.206/}.

\subsection{Django} 

Como ya se ha explicado en el capítulo 3 de la memoria, Dr. Pencilcode es una plataforma desarrollada con Django \cite{djangoGirls}. En la \textit{Figura ~\ref{figura:folder}}, se puede observar el árbol de ficheros y directorios que componen la aplicación.


\begin{figure}[H]
   \centering
   \includegraphics[width=11cm, keepaspectratio]{img/folder.jpg}
   \caption{Carpetas y ficheros del proyecto.}
   \label{figura:folder}
\end{figure}

Apache tiene como objetivo enviar las peticiones HTTP a Django. El fichero \texttt{urls.py} es el encargado de gestionar dichas peticiones y de comprobar si el recurso solicitado por el cliente es servido o no por nuestra aplicación.
\texttt{urls.py} no es más que una lista en la que se especifican los recursos que son servidos por Dr. Pencilcode.

En el caso de que el recurso solicitado - la URL - no coincida con ninguno de los indicados en \texttt{urls.py}, se redirigirá al usuario a la página principal; en caso contrario, Django, pasará la petición a la función asociada de \texttt{views.py}.

Una vez encontrada la función asociada a dicha URL, ejecutado el código y procesado toda la información, dicha función deberá devolver una página de respuesta HTML - template - renderizada con los datos que se quieren mostrar en el HTML. La arquitectura general se muestra en la \textit{Figura \ref{fig:architecture}}

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/architecture.png}
  \caption{Arquitectura general de Dr. Pencilcode}
  \label{fig:architecture}
\end{figure}


\subsection{Bases de datos} 

Para poder almacenar y gestionar toda la información, Dr. Pencilcode, dispone de una base de datos.
SQLite es la base de datos que se usa en Django por defecto y es la que se utilizó en local durante el desarrollo del proyecto. Sin embargo, a la hora de subir la aplicación al servidor, decidí cambiar a MySQL - versión 5.5.53 - ya que es un sistema de gestión mucho más potente, pudiendo soportar mayor cantidad de datos. 

\begin{figure}[H]
  \centering
  \includegraphics[width=6cm, keepaspectratio]{img/bbdd.png}
  \caption{Base de datos Dr. Pencilcode}
  \label{fig:bbdd}
\end{figure}

Como se puede observar en la \textit{Figura \ref{fig:bbdd}}, existen algunas tablas cuyos nombres comienzan por app, auth y django; estas dos últimas, son tablas que se definen automáticamente por Django y que se encargan de funcionalidades como las sesiones, las migraciones, la autenticación, etc. Las tablas que comienzan por app son las que realmente se crean en el fichero \texttt{models.py}.


\section{Página principal}
\label{sec:mainpage}

Lo primero que se observa nada más acceder al sitio web es el diseño mostrado en la \textit{Figura ~\ref{fig:mainpage}}. En esta sección se hace una breve presentación de la herramienta y se muestra el cuadro en el que se introduce la URL para dar paso al análisis del proyecto.

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/main.png}
  \caption{Diseño página principal}
  \label{fig:mainpage}
\end{figure}

La mayoría de los niños podrían no saber lo que es una URL, para solucionar esta cuestión, se desarrolló una ventana modal en la que se incluía información extra de cómo conseguir la URL de los proyectos Pencil Code. La ventana modal se muestra en la \textit{Figura ~\ref{fig:ventanaurl}} y ésta aparece cuando el usuario pincha sobre la palabra \textcolor{red}{url} que está marcada en rojo.

\begin{figure}[H]
  \centering
  \includegraphics[width=8cm, keepaspectratio]{img/queesurl.png}
  \caption{Ventana modal URL}
  \label{fig:ventanaurl}
\end{figure}

A parte de esta visión, la página principal incluye 4 secciones más donde se habla de diferentes aspectos relacionados con Dr. Pencilcode:

\begin{enumerate}

\item \textbf{Why?} explica los puntos fuertes de la aplicación y los motivos por los que su uso es tan positivo. Además, se hace hincapié en el continuo deseo de mejorar la plataforma teniendo en cuenta la opinión del usuario. Sección mostrada en la  \textit{Figura ~\ref{fig:mainwhy}}.

\begin{figure}[H]
  \centering
  \includegraphics[width=13cm, keepaspectratio]{img/mainWhy.png}
  \caption{Sección Why}
  \label{fig:mainwhy}
\end{figure}

\item \textbf{How?} guía a los usuarios principiantes en su primer análisis indicándoles los pasos a seguir. El diseño de esta sección se puede ver en la \textit{Figura~\ref{fig:mainhow}}.

\begin{figure}[H]
  \centering
  \includegraphics[width=13cm, keepaspectratio]{img/mainHow.png}
  \caption{Sección How}
  \label{fig:mainhow}
\end{figure}

\item \textbf{Coming soon}. En esta sección se explican las nuevas funcionalidades que se quieren incluir a la aplicación en un futuro cercano, como puede ser la traducción de la página a distintos idiomas, la introducción de cuentas de usuarios o la creación de un plug-in en Firefox y Chrome para tener Dr. Pencilcode siempre a la vista. Por el momento, ninguna de ellas ha sido implementada, aunque espero continuar con este proyecto y realizarlas próximamente. El aspecto de esta sección se muestra en la \textit{Figura~\ref{fig:mainfeatures}}.

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/mainComing.png}
  \caption{Sección New Features}
  \label{fig:mainfeatures}
\end{figure}

\item \textbf{Contact} muestra todas las vías (Twitter, email y GitHub) por las que el usuario puede ponerse en contacto con el equipo de Dr. Pencilcode. Esto nos permitirá conocer diferentes puntos de vista y opiniones acerca de la aplicación y si está cumpliendo, o no, su propósito. Su diseño se puede ver en la \textit{Figura~\ref{fig:maincontact}}.


\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/mainContact.png}
  \caption{Sección Contact}
  \label{fig:maincontact}
\end{figure}

En la acualidad, el equipo de Dr. Pencilcode no dispone de cuentas de e-mail y Twitter propias por lo que se remite a los usuarios a las cuentas de Dr. Scratch.

\end{enumerate}

\section{Rúbrica de Dr. Pencilcode}

Durante el diseño de la página web fue necesario detenerme a pensar cómo quería que se analizaran los proyectos de Pencil Code. Quizá, ésta fue una de las partes que más tiempo me llevó ya que al tratarse de un lenguaje de programación de propósito general y por tanto, un lenguaje más complejo, no tenía claro como podía enfocar dicha evaluación.\newline

La rúbrica inicial es muy diferente a la que está disponible actualmente en la web. A lo largo de mi año de trabajo, se han ido realizando diferentes modificaciones hasta llegar al método de evaluación que estábamos buscando. Se pueden distinguir tres fases principales en el desarrollo de la rúbrica:


\subsection{FASE I}

Al comenzar el proyecto se decidió realizar el análisis de la misma forma que en Dr. Scratch. El objetivo era evaluar los programas calificando aspectos del pensamiento computacional - \textit{pensamiento lógico}, \textit{control de flujo}, \textit{abstracción}, \textit{paralelismo}, \textit{interactividad con el usuario}, \textit{representación de la información} y \textit{sincronización} - en función de los bloques utilizados. \newline
En cada uno de los 7 aspectos se podía obtener un total de 3 puntos, lo que conllevaba una puntuación máxima de 21 puntos. Dependiendo de la puntuación obtenida, el usuario podía tener un nivel \textit{basic}, \textit{developing} o \textit{proficiency}, tal y como se muestra en la \textit{Tabla \ref{tabla:clasif1}}

\begin{table}[htbp]
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
\cellcolor[HTML]{A1EDEB}Nivel & \cellcolor[HTML]{A1EDEB}Puntos \\
\hline \hline
Basic & Puntos $<$ 7 \\ \hline
Developing & 7 $<$ Puntos $<$ 15 \\ \hline
Proficiency & 15 $<$ Puntos $<$ 21 \\ \hline
\end{tabular}
\caption{Clasificación de niveles fase I}
\label{tabla:clasif1}
\end{center}
\end{table}


Tras varios correos con Yana y a medida que se probaba y se desarrollaba la rúbrica, nos dimos cuenta de que algunos de los aspectos de Pensamiento Computacional, como la sincronización y el paralelismo, no eran aplicables a Pencil Code ya que eran dimensiones más específicas de Scratch. A partir de ese momento, se decidió rediseñar el método de evaluación dando lugar a las Fase II.


\subsection{FASE II}

Visto que lo comentado en el apartado anterior era inviable, decidimos evaluar los proyectos centrándonos en las dimensiones más significativas de Pencil Code: \textit{Move}, \textit{Text}, \textit{Sound}, \textit{Art}, \textit{Control} y \textit{Operators}.

En esta fase, se quitaron las puntuaciones y los niveles, las categorías se evaluaban en función del número de bloques utilizados en cada una de ellas y, además, se cambiaron las fracciones por porcentajes.

Para medir el porcentaje de bloques usados, se contó el número de bloques visibles que aparecían por defecto en las categorías de Pencil Code - denominado \textit{maxblocks}- y, a continuación, se aplicaron las reglas mostradas en la \textit{Tabla \ref{tabla:clasif}}. El número de bloques en cada categoría era:
Maxblocks = $\{$'Move': 12, 'Art': 12, 'Text': 8, 'Sound': 6, 'Control': 15, 'Operators': 18$\}$


\begin{table}[htbp]
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
\cellcolor[HTML]{A1EDEB}Bloques utilizados & \cellcolor[HTML]{A1EDEB}Condición \\
\hline \hline
100$\%$ & 3/4 · maxblocks $<$ nº bloques $<$ maxblocks \\ \hline
75$\%$  & 1/2 · maxblocks $<$ nº bloques $<$ 3/4 · maxblocks \\ \hline
50$\%$  & 1/4 · maxblocks $<$ nº bloques $<$ 1/2 · maxblocks \\ \hline
25$\%$  & 0 $<$ nº bloques $<$ 1/4 · maxblocks \\ \hline
0$\%$  & nº bloques = 0 \\ \hline
\end{tabular}
\caption{Porcentajes fase II}
\label{tabla:clasif}
\end{center}
\end{table}


Una vez más, tras probar la rúbrica, decidimos volver a cambiar la forma de evaluar principalmente por dos motivos:

\begin{enumerate}

\item Debido a la capacidad de Pencil Code de cambiar el modo de programación de bloques a código, el número total de bloques por categoría no era posible indicarlo con determinación ya que el usuario podía escribir tanto código como quisiera, incluyendo bloques no visibles en la interfaz de cada categoría.

\item Este método, realmente, no evaluaba los proyectos, si no que mostraba el porcentaje de bloques que se habían utilizado. Desde mi punto de vista, esta rúbrica no impulsaba tanto el deseo de mejorar y aprender a programar como lo podía hacer la rúbrica de la fase I (con niveles y puntuaciones).

\end{enumerate}
 
\subsection{FASE III}

Para tener en cuenta todas las posibilidades, se buscó información sobre todos los bloques que se podían utilizar en cada categoría, incluyendo tanto los que aparecen por defecto en Pencil Code como los que no se muestran en la interfaz. Se introdujeron de nuevo los niveles y las puntuaciones y se pasó de porcentajes a fracciones. \newline

La rúbrica final de Dr. Pencilcode y la que se encuentra disponible actualmente en la web es la que se explica a continuación:

\begin{itemize}

\item En cada categoría se puede obtener un máximo de 3 puntos, dependiendo del tipo de bloque utilizado en dichas categorías, se podrán obtener 1, 2 o 3 puntos.
\item Sumando los puntos obtenidos en cada categoría se puede llegar a obtener un total de 18 puntos.
\item La puntuación máxima se consigue usando bloques de nivel 3 en todas las categorías y obteniendo todos los bonus.
\item En función de los puntos obtenidos, el nivel de programación del usuario puede ser: Básico, intermedio, avanzado o experto, mostrado en la \textit{Tabla \ref{tabla:clasif3}}.

\end{itemize}

\begin{table}[htbp]
\begin{center}
\begin{tabular}{|c|c|c|}
\hline
\cellcolor[HTML]{A1EDEB}Nivel & \cellcolor[HTML]{A1EDEB}Puntos \\
\hline \hline
Básico & Puntos $<$ 6 \\ \hline
Intermedio & 6 $<$ Puntos $<$ 12 \\ \hline
Avanzado & 12 $<$ Puntos $<$ 18 \\ \hline
Experto & Puntos $>$ 18 \\ \hline
\end{tabular}
\caption{Clasificación de niveles fase III}
\label{tabla:clasif3}
\end{center}
\end{table}


Finalmente, para motivar aún más a los niños, se decidió añadir Bonus. Por el momento hay 4 tipos de bonus disponibles:

\begin{enumerate}

\item \textbf{Bonus por diversidad}: se obtiene cuando el usuario utiliza bloques pertenecientes a los 3 niveles de una misma categoría.

\item \textbf{Bonus por complejidad}: se consigue cuando el usuario utiliza más bloques de nivel 3 que bloques de niveles inferiores en la misma categoría.

\item \textbf{Bonus por todas las categorías}: Como ya sabemos, Pencil Code está formado por 6 categorías principales, este bonus se obtiene si el programa analizado contiene bloques de las 6 categorías.

\item \textbf{Bonus por repetición de bloques}: se obtiene cuando se utiliza el mismo bloque más de una vez.

\end{enumerate}

\section{Dashboard}
\label{sec:Dashboard}

A medida que se iba modificando la rúbrica de Dr. Pencilcode, también lo iba haciendo el diseño de la página de análisis. En esta sección se explicará y se mostrará la evolución - modificaciones y nuevas funcionalidades - del dashboard durante las fases mencionadas anteriormente. 

\subsection{FASE I}

Al tratarse de la primera rúbrica, la apariencia del dashboard era muy similar al de Dr.Scratch, véase \textit{Figura ~\ref{fig:dashboardf1}}. Esta versión de la página constaba de cuatro secciones principales:

\begin{figure}[H]
  \centering
  \includegraphics[width=11.5cm, keepaspectratio]{img/fase1dashboard.png}
  \caption{Dashboard Fase I}
  \label{fig:dashboardf1}
\end{figure}

\begin{enumerate}

\item \textbf{Cabecera superior}: esta sección incluía el logo de Dr. Pencilcode, presentaba iconos con enlaces a algunas redes sociales de nuestro equipo como e-mail y Twitter y, además, contenía un botón de ayuda - \textit{Tour}\footnote{\url{http://bootstraptour.com/}} - encargado de explicar cada una de las secciones del dashboard. 

\item \textbf{Puntos y nivel}: mostraba la puntuación total adquirida sobre 18 junto con el nivel obtenido (basic, developing o proficiency). En esta sección también se ofrecía la posibilidad de publicar la puntuación en Twitter, tal y como se muestra en la \textit{Figura ~\ref{fig:twitter}}.\newline


\begin{figure}[H]
  \centering
  \includegraphics[width=6cm, keepaspectratio]{img/twitter.png}
  \caption{Publicación en Twitter}
  \label{fig:twitter}
\end{figure}


\item \textbf{Tabla de puntuaciones}: aquí se mostraban las puntuaciones parciales de cada uno de los aspectos del pensamiento computacional. Como se puede observar en la imagen, las habilidades de \textit{Sincronización} y \textit{Paralelismo} aparecían vacías debido a que no estaban definidas para Pencil Code. Además, incluía un enlace para poder volver al proyecto Pencil Code y seguir con la programación.

\item \textbf{Want to level up?}: ofrecía enlaces a páginas de ayuda, donde los usuarios podían encontrar ejemplos para subir su puntuación final. En ese momento las páginas de ayuda todavía no estaban adaptadas a Pencil Code.

\end{enumerate}


\newpage
\subsection{FASE II}

El cambio de rúbrica pasando del análisis de los aspectos del pensamiento computacional al análisis de las principales categorías de Pencil Code - Move, Art, Sound, Text, Control, Operators - conllevó la realización de varias modificaciones en el dashboard, como se puede observar en la \textit{Figura \ref{fig:dashboardf2}}.

\begin{figure}[H]
  \centering
  \includegraphics[width=16cm, keepaspectratio]{img/fase2dashboard.png}
  \caption{Dashboard Fase II}
  \label{fig:dashboardf2}
\end{figure}

En cuanto a las 4 secciones principales:

\begin{enumerate}

\item \textbf{Cabecera superior}: se mantuvo el mismo aspecto que en la fase I, exceptuando la omisión del botón \textit{Tour}.

\item \textbf{Puntos y nivel}: Se eliminaron las puntuaciones y los niveles sustituyéndose por un mensaje que motivara a los usuarios a mantener su curiosidad y seguir programando. El botón de Twitter y el enlace al proyecto de Pencil Code se trasladaron a esta sección.

\item \textbf{Tabla de puntuaciones}: Se modificó por completo la tabla cambiando los nombres de los aspectos de pensamiento computacional al de las categorías de Pencil Code y cambiando las barras de progreso de fracciones a porcentajes, pudiendo obtenerse un 25$\%$, 50$\%$, 75$\%$ o 100$\%$ en cada categoría.

\item \textbf{Want to know more?}: al desaparecer las puntuaciones se cambió la sección \textit{want to level up?} a \textit{want to know more?} donde se añadieron enlaces a las páginas de ayuda de las distintas categorías.

\end{enumerate}



Además, para que los usuario pudieran obtener más información acerca de su programa, se añadió una \textbf{nueva sección} \textit{Blocks Details} en la que se mostraban las categorías y los bloques utilizados en cada una de ellas. En el caso de que en alguna de las categorías no se hubiera utilizado ningún bloque se indicaba con un \textbf{Not used} asociado a dicha categoría. Para poder ver esta sección los usuarios tenían que hacer scroll en la pantalla; su diseño se puede observar en la \textit{Figura ~\ref{fig:detallesf2}}.

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/fase2details.png}
  \caption{Sección Details Fase II}
  \label{fig:detallesf2}
\end{figure}

\subsection{FASE III}

Con la nueva y última modificación del método de evaluación se volvió a cambiar el diseño del dashboard. Además de los cambios en la secciones, se añadieron nuevas implementaciones y un mayor número de elementos visuales para dotar a la web de mayor inteligibilidad, véase \textit{Figura ~\ref{fig:dashboardf3}}. 

En cuanto a las secciones previamente definidas:

\begin{enumerate}

\item \textbf{Cabecera superior}: Se habilitó de nuevo el botón \textit{Help} añadiendo 3 pasos adicionales al Tour, uno por cada nueva sección: \textit{Details: Used Blocks, Download Certificate y Help us!}. El aspecto del tour es el que se muestra en  \textit{Figura ~\ref{fig:Tourdashboard}}.

\begin{figure}[H]
  \centering
  \includegraphics[width=8cm, keepaspectratio]{img/help.png}
  \caption{Tour Dashboard}
  \label{fig:Tourdashboard}
\end{figure}

\item \textbf{Puntos y nivel}: Se volvieron a incluir puntuación y niveles (\textit{basic, intermediate, master y expert}), pero no puntuación máxima. 

\item \textbf{Tabla de puntuaciones}: Con la introducción de los Bonus, se añadió una nueva fila a la tabla de puntuaciones en la que estos quedaban representados con estrellas; se rellenan tantas estrellas como bonus se consigan.
Además, el hecho de tener una sección dedicada únicamente a los enlaces de las páginas de ayuda quitaba demasiado espacio, por ello, se decidió habilitar los enlaces en la tabla de puntuaciones y aprovechar la sección, ahora llamada, \textit{What can you improve?} para introducir consejos sobre como mejorar el programa.

\item \textbf{What can you improve?}: se introdujeron mensajes donde se aconsejaba al usuario en cual de las categorías debía trabajar más para subir su nivel, así como sugerencias para completar todos los bonus. Estos mensajes se centran en las categorías en las que se ha conseguido el nivel más bajo.

\item \textbf{Details: Used Blocks}: para conocer los bonus conseguidos de una forma más específica, se añadió a la sección \textit{Details} un desplegable \textit{Bonus} donde se explicaba porqué motivo se habían obtenido. También se añadieron elementos visuales.

\end{enumerate}

A esta altura del proyecto, surgió la idea de crear un formulario para recopilar diferentes opiniones sobre la web y añadir un diploma que pudiera descargarse.
Por ello, se decidió habilitar dos nuevos botones, uno de ellos para redirigir al formulario y otro para descargar el certificado. En este momento, el aspecto de la página era el mostrado en la \textit{Figura \ref{fig:dashboardf3}}. \newline

\begin{figure}[H]
  \centering
  \includegraphics[width=13cm, keepaspectratio]{img/Fase3dashboard.png}
  \caption{Dashboard Fase III}
  \label{fig:dashboardf3}
\end{figure}

Finalmente, se llevó a cabo una última modificación que dio lugar al diseño actual de la plataforma, disponible en la web \url{http://drpencilcode.libresoft.info/}.

Por lo general, los niños no suelen hacer scroll en la pantalla, esto podía desencadenar que la sección de \textit{Details} y los nuevos botones añadidos en la parte inferior fueran ignorados por el usuario, por ello, se decidió agrupar las categorías de tal forma que todas fueran visibles al cargar la página \texttt{dashboard.html}.

Al tratarse de información adicional, la sección \textit{Details}, se hizo desplegable; así, si el usuario quiere conocer más sobre su proyecto, lo único que tiene que hacer es pinchar en la flecha de despliegue. 
La última versión del dashboard es la que se muestran en las \textit{Figuras \ref{fig:dashboardfinal} y \ref{fig:detallesf3}}.



\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/dashboard.png}
  \caption{Página Final Dashboard}
  \label{fig:dashboardfinal}
\end{figure}


\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/details.png}
  \caption{Detalles de los resultados}
  \label{fig:detallesf3}
\end{figure}


\newpage
\section{Análisis de proyectos Pencil Code}
\label{sec:analisis}

A pesar de la gran evolución que ha tenido el proyecto, a partir de ahora, me centraré únicamente en la Fase III ya que es la que está implementada actualmente y es así como funciona realmente la aplicación.\newline

Al igual que Dr.Scratch realiza el análisis apoyándose en plugins de Hairball, era necesario crear un nuevo plugin, \texttt{coffee-mastery.py}, para llevar a cabo la implementación de la rúbrica de Dr.Pencilcode. En esta sección se explica cómo se analizan los proyectos, desde que se introduce la URL hasta que se muestran los resultados en el dashboard.\newline

El análisis de los proyectos sigue una estructura similar a la de Dr. Scratch, sin embargo, se han tenido que hacer modificaciones en las funciones \textit{selector}, \textit{processStringUrl}, \textit{sendRequestgetJSON}, \textit{handler$\_$upload} y \textit{analyzeProject} que son las principales encargadas de realizar todo el proceso de análisis.


\subsection{Coffee-Mastery}

Como se ha comentado, con el objetivo de implementar la rúbrica de Dr. Pencilcode se desarrolló \texttt{coffee-mastery.py}; en él se definen seis funciones - una por categoría - donde se encuentran los conjuntos\footnote{NOTA: Un conjunto es una lista desordenada y sin elementos repetidos. Los conjuntos soportan operaciones matemáticas como la unión, la intersección y la diferencia. La función set() puede utilizarse para crear conjuntos \cite{pythonset}.} (básico, intermedio y avanzado) en los que se determinan a que niveles pertenecen los bloques de cada categoría. Coffee-mastery es el que realmente se encarga de analizar los proyectos de Pencil Code; su finalidad es devolver información del proyecto analizado.\newline

Para analizar un proyecto con Coffee-mastery se debe introducir el comando \texttt{python coffee-mastery.py colors.coffee}, especificando como parámetro el nombre del archivo CoffeeScript. La salida del programa es la que se muestra en la \textit{Figura \ref{fig:coffee-mastery}}.

\begin{figure}[H]
  \centering
  \includegraphics[width=16cm, keepaspectratio]{img/salidacoffemastery.png}
  \caption{Salida de coffee-mastery.py}
  \label{fig:coffee-mastery}
\end{figure}

Como se puede observar, coffee-mastery ofrece información sobre los bloques que se han utilizado en cada una de las categorías, indicándose también el nivel al que pertenece cada bloque; los bloques duplicados y el número de veces que se ha repetido cada uno de ellos y, por último, el número total de puntos que se ha obtenido en cada categoría.

El proceso que sigue Coffee-mastery hasta conseguir toda esta información es el siguiente:

\begin{enumerate}

\item Lo primero que hace el plugin es leer el contenido del fichero .coffee

\item A continuación, elimina los comentarios del programa, así como los caracteres numéricos, los paréntesis y todo texto que vaya entre comillas.

\item Una vez que el código está ``limpio'', se crea una lista de tokens - tokenList - con lo que queda del código del programa.

\item Se llama a la función \textit{duplicates()}, pasando como parámetro tokenList, que devuelve un diccionario con los bloques repetidos.

\item Se llama seis veces a la función \textit{check()},  una vez por cada categoría. Ésta se encarga de realizar la intersección entre el set() del código del programa - tokenSet - y los Sets() básico, intermedio y avanzado de esa categoría. Si en alguna categoría no se encuentran elementos comunes con el código del programa, la función le asignará un \textit{False}; en caso contrario, se devolverá un diccionario con los niveles y los bloques utilizados en el nivel correspondiente.

\item Por último, se llama a la función \textit{niveles()} y ésta, a su vez, a la función \textit{checking()}. \textit{Checking()} comprueba mediante intersección de Sets qué niveles se han utilizado en el programa y devuelve el nivel más alto. \textit{Niveles()} recoge esta información y crea un diccionario con las categorías y sus puntuaciones.

\end{enumerate}


\subsection{Análisis por URL}

A la hora de introducir la URL en Dr.Scratch, si ésta no es correcta, pueden aparecer 3 tipos de errores: si la URL está mal escrita, si la URL/proyecto no existe en los servidores de Scratch o si en la URL no se ha introducido ningún valor.


\begin{figure}[H]
 \centering
  \subfloat[id error]{
   \label{f:htmlcss}
    \includegraphics[width=0.35\textwidth]{img/iderror.png}}
  \subfloat[not exist]{
   \label{f:css}
    \includegraphics[width=0.32\textwidth]{img/notexisterror.png}}
  \subfloat[error]{
   \label{f:css}
    \includegraphics[width=0.35\textwidth]{img/urlerror.png}}
 \caption{Errores al analizar un proyecto.}
 \label{f:animales}
\end{figure}

En Dr.Pencilcode, además de esos tres, se incluye un nuevo error, \textbf{code$\_$error}, el cual se invoca cuando el código del programa Pencil Code no está correctamente escrito. Para poder lanzar este error se hace uso de la herramienta CoffeeLint que, como se ha explicado en el capítulo anterior, es un analizador estático de código CoffeeScript.\newline

\begin{figure}[H]
  \centering
  \includegraphics[width=6cm, keepaspectratio]{img/code_error.png}
  \caption{Nuevo error de código}
  \label{fig:codeerror}
\end{figure}

\newpage
A continuación explicaré, a grandes rangos, los pasos que se siguen para el análisis de los proyectos y, posteriormente, mostraré el diagrama de flujo para tener una idea más clara de las funciones implicadas y su propósito.

\begin{figure}[H]
  \centering
  \includegraphics[width=12cm, keepaspectratio]{img/funciones.jpg}
  \caption{Relación entre funciones.}
  \label{fig:coffee-mastery}
\end{figure}

\begin{enumerate}

\item Una vez introducida la URL, se llama a la función \textit{selector()}; ésta se encarga de devolver la página \texttt{dashboard.html} (renderizada con un diccionario que contiene toda la información del análisis de ese proyecto) o la página 	\texttt{main.html} (con alguno de los 4 errores comentados anteriormente) en función de si ha habido o no problemas a la hora de ejecutar el resto de funciones.

\item \textit{urlUnregistered()} comprueba si el formulario es válido y llama a las funciones \textit{ProcessStringUrl()}, \textit{sendRequestgetJSON()} y \textit{analyzeProject()}. Al final, devuelve un diccionario a \textit{selector()} con información del proyecto o información de error (code$\_$error, no$\_$exists y error analyzing) dependiendo de si las funciones a las que llama se ejecutan correctamente o no.

\item \textit{processStringUrl()} comprueba si la URL introducida por el usuario está correctamente escrita; si es así, devolverá la URL con el siguiente formato: \url{http://sarabc.pencilcode.net/load/first}, en caso contrario, devolverá un error de ID (id$\_$error).

\item \textit{sendRequestgetJSON()} Guarda información del proyecto en la base de datos y en logFile.txt. Además, realiza la petición a Pencil Code, abre la URL \url{http://sarabc.pencilcode.net/load/first}, lee los datos que contiene (en este caso el código del programa analizado) y escribe todo en un fichero .json.

\item \textit{handler$\_$upload()} se encarga de comprobar si el fichero *.json exite ya en la carpeta de \textit{/uploads}. En caso de que exista, el documento recibirá un nombre con formato \textbf{*(num).json} donde num es el número de veces que el documento original está repetido.
 
\item \textit{AnalyzeProject()} es la encargada de analizar los proyectos haciendo uso del plugin coffee-mastery y la función \textit{procMastery()}. Comprueba si el código del programa está bien escrito usando CoffeeLint. Finalmente, devuelve el resultado del análisis en un diccionario, que es el que llega a \textit{selector()}.

\item \textit{ProcMastery()} se encarga de montar el diccionario y guardar todo en la base de datos; suma los puntos, comprueba los bonus llamando a \textit{CalculoBonus()} y comprueba los mensajes de ayuda de la sección \textit{What can you improve?} llamando a \textit{wtimprove()}. 

\end{enumerate}

En la \textit{Figura ~\ref{fig:analisis}} se puede observar el diagrama de flujo del análisis de los proyectos por URL.

\newpage

\begin{figure}[H]
   \centering
   \includegraphics[width=17cm, keepaspectratio]{img/analisis.png}
   \caption{Análisis por URL}
   \label{fig:analisis}
\end{figure}

\section{Páginas de ayuda}
\label{sec:ayuda}

Al tratarse de una herramienta educativa, en Dr. Pencilcode, se incluyen nueve nuevas páginas de ayuda que dan soporte a los usuarios. Estas páginas son extensiones del documento \texttt{base.html} que es el que contiene el diseño básico de todo el conjunto. A través de \texttt{base.html} o \texttt{dashboard.html}, podemos acceder a cada una de las páginas de ayuda vía enlace. 

Seis de ellas (\texttt{Move.html}, \texttt{Art.html}, \texttt{Text.html}, \texttt{Sound.html}, \texttt{Control.html}, \texttt{Operators.html}) contienen información sobre las diferentes categorías de Pencil Code. Estas páginas son muy útiles cuando el usuario quiere subir su puntuación; en ellas se incluyen varios ejemplos, con las respectivas explicaciones del programa, de cómo utilizar los bloques de cada nivel. Además, al final de cada página, se añaden enlaces a páginas externas donde hay gran cantidad de programas con los que pueden aprender.\newline

Para acceder a las páginas de ayuda se debe pinchar en los enlaces (con el nombre de las categorías) que aparecen tras analizar un proyecto. El diseño de estas seis páginas es similar y es el que se observa en la \textit{Figura~\ref{fig:helpmove}}

\begin{figure}[H]
  \centering
  \includegraphics[width=16cm, keepaspectratio]{img/helpmove.png}
  \caption{Página de ayuda Move}
  \label{fig:helpmove}
\end{figure}

Por lo general, cuando una persona está siendo evaluada, ésta prefiere conocer los métodos de evaluación (rúbrica) que están siendo utilizados.
Las tres páginas restantes (\texttt{Points.html}, \texttt{Bonus.html} y \texttt{Blocks.html}) están destinadas a mostrar los bloques existentes por categoría y a la explicación de cómo Dr.Pencilcode evalúa o analiza los proyectos, es decir, determina las puntuaciones y los bonus que se asignan a cada proyecto. \newline
En la \textit{Figura~\ref{fig:helpoints}} se muestra, como ejemplo, el diseño de la página \texttt{Points.html}:

\begin{figure}[H]
  \centering
  \includegraphics[width=16cm, keepaspectratio]{img/helppoints.png}
  \caption{Página de ayuda Points}
  \label{fig:helpoints}
\end{figure}


Durante el diseño de esta sección se mantuvo intercambio de correos con Yana para explicarle la idea del desarrollo de las páginas de ayuda; propuesta que le pareció muy acertada.


\section{Formulario}
\label{sec:Formulario}

Con la finalidad de recibir retroalimentación y tener en cuenta las opiniones de todos los usuarios - tanto alumnos como docentes - para seguir mejorando la herramienta y las funcionalidades de ésta, se decidió realizar un formulario.\newline

En primer lugar, el formulario se realizó en papel. Éste se centraba en conocer los niveles de usabilidad, interactividad e inteligibilidad de la herramienta desde el punto de vista del usuario. La encuesta incluía preguntas relacionadas con la apariencia de la web, el deseo del alumno de seguir mejorando su proyecto una vez analizado y conocida su puntuación, la capacidad para moverse por las diferentes páginas... concluyendo con un apartado de libre opinión. 
La idea principal era que cada usuario que utilizara Dr. Pencilcode rellenara el formulario y nos lo enviara por correo.\newline


Una vez diseñada la encuesta, nos pusimos en contacto con Yana para conocer su opinión acerca de esta nueva idea.
Como se puede leer en los correos del \textit{Apéndice~\ref{app:emails}}, había preocupación en las palabras y expresiones utilizadas en la primera versión del formulario. Al tratarse de una encuesta enfocada especialmente a niños, Yana sugirió modificar las preguntas y adaptar las palabras con el fin de que fueran comprensibles para los más pequeños.

Así mismo, para no utilizar papel y hacer todo más fácil y rápido, decidimos añadir una nueva funcionalidad implementando el formulario en la página web.\newline

Para acceder al formulario, simplemente, se tiene que pinchar en el botón \textbf{Help us} habilitado en la página de análisis del proyecto o \textit{Dashboard}. Al pinchar, se abre una nueva pestaña en el navegador dando paso a la página del formulario \textbf{Helpus.html}. 

\begin{figure}[H]
  \centering
  \includegraphics[width=16cm, keepaspectratio]{img/BotonHelpus.png}
  \caption{Botón Help us}
  \label{fig:botonhelpus}
\end{figure}

El motivo de abrir una nueva pestaña, es el de facilitar a los usuarios el poder contestar a las preguntas a la vez que analizan sus proyectos, investigan y navegan por la aplicación web. 
El diseño de la página del formulario es el mostrado en la \textit{Figura~\ref{fig:PagForm}}

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/formpage.png}
  \caption{Página de formulario}
  \label{fig:PagForm}
\end{figure}

Para desarrollar esta funcionalidad se crea una nueva función en views.py llamada \textit{getFeedback()}. Una vez que el usuario pulsa el botón \textbf{Submit} se lleva a cabo una petición HTTP POST con el recurso /helpus. El documento urls.py es el encargado de enlazar con la función \textit{getFeedback()} de views.py. \newline

\textbf{getFeedback} inicializa dos variables booleanas - form$\_$filled y data$\_$exist - a False, dependiendo de los valores que vayan tomando estas variables a lo largo de la función, se mostrará por pantalla uno de los siguientes mensajes: success, warning o danger (warning por defecto).

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/mensajes.png}
  \caption{Mensajes del formulario}
  \label{fig:PagForm}
\end{figure}

En \textbf{getFeedback()} se utiliza la función de Django is$\_$valid(), encargada de comprobar si los campos introducidos en el formulario son válidos.
En el caso de que alguno de los campos no esté completo o no coincida con lo indicado en forms.py, se mostrará por pantalla el \textit{mensaje warning}. Si, por el contrario, el formulario está completo y todos los campos son correctos, esta función pondrá form$\_$filled a True y obtendrá toda la información del formulario.\newline

El siguiente paso es comprobar que los campos de \textit{name} y \textit{user} no existen ya en un mismo registro de la base de datos. Si todo es correcto, se guardarán los datos en la BBDD y se mostrará por pantalla el \textit{mensaje success}, en caso contrario, se pondrá data$\_$exist a True y, al llamar al template, se mostrará por pantalla el \textit{mensaje danger} indicando el error.\newline

Para poder comprender el trabajo de la función \textbf{getFeedback}, se muestra su algoritmo a continuación:

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/formulario.jpg}
  \caption{Algoritmo de la función getFeedback.}
  \label{fig:PagForm}
\end{figure}

\section{Certificado}
\label{sec:Certificado}

Con la intención de motivar aún más a los niños, Dr. Pencilcode, ofrece la posibilidad de conseguir tu propio certificado; en él se indica el nombre del proyecto que se ha analizado y la puntuación asociada al mismo, tal y como se muestra en la \textit{Figura ~\ref{fig:certificado}}. 
Son varios los documentos/funciones que participan en la generación del diploma: 

\begin{itemize}

\item \texttt{certix.tex} es la plantilla LaTeX del certificado; en ella se insertan el nombre del proyecto y la puntuación que se pasan como parámetros a pyploma.py.

\item \texttt{output.tex} es un fichero LaTeX que se crea cada vez que un usuario se descarga el diploma; en él se guardan todos los cambios realizados en certix.py.

\item \texttt{pyploma.py} es el script encargado de gestionar los documentos certix.tex y output.tex, así como de realizar la conversión de output.tex a output.pdf.

\item \texttt{download$\_$certificate} es la función de views.py encargada de llamar a pyploma.py pasándole como parámetros el nombre del proyecto y su puntuación total. Una vez que se ha generado el PDF del certificado, esta función crea una respuesta HTTP que permitirá descargar el diploma automáticamente.

\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/certificado.png}
  \caption{Certificado Dr. Pencilcode}
  \label{fig:certificado}
\end{figure}

Para descargar el diploma, como en el caso del formulario, hay que pinchar en el botón \textbf{Download Certificate} habilitado en la página de análisis.
Cuando el botón es pulsado se lleva a cabo una petición HTTP POST con el recurso /download$\_$certificate y \texttt{urls.py} enlaza con la función, de mismo nombre,  \textbf{download$\_$certificate} de \texttt{views.py}.\newline

\textbf{Download$\_$certificate} llama a la función pyploma.py pasando como parámetros el nombre del proyecto analizado y su puntuación total; ésta crea un fichero LaTeX \texttt{output.tex} para cada usuario. Una vez que los nuevos parámetros se insertan en la plantilla \texttt{certix.tex}, los cambios se guardan en el fichero \texttt{output.tex} creado para ese usuario y se pasa a documento PDF.\newline

Finalmente, \textbf{download$\_$certificate} crea una respuesta HTTP con MIME application/pdf y con el documento output.pdf, de esta forma el diploma se descargará automaticamente.

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/esquemacertif.png}
  \caption{Esquema certificado}
  \label{fig:certificado}
\end{figure}

\section{Diferencias entre Dr. Pencilcode y Dr. Scratch}
\label{sec:pencilvsscrath}

Algunas funcionalidades de Dr. Pencilcode ya existían previamente en Dr. Scratch, sin embargo, para poder adaptarlas a Pencil Code, la mayor parte de los archivos se han tenido que modificar. \newline

A estas modificaciones se incluyen también las nuevas funcionalidades y plugins desarrollados en este proyecto, como las 9 páginas de ayuda (\textit{Move.html}, \textit{Art.html}, \textit{Text.html}, \textit{Sound.html}, \textit{Control.html}, \textit{Operators.html}, \textit{Points.html}, \textit{Bonus.html} y \textit{Blocks.html}), las nuevas secciones en la página de \textit{dashboard.html} (bonus, botones, details, etc), el formulario y el plugin \textit{coffee-mastery.py}. \newline 

Para poder demostrar que, realmente, ha habido modificaciones, he realizado una comparación entre el repositorio de la última versión de Dr. Pencilcode y el repositorio master de Dr. Scratch.\newline

\newpage

\texttt{cd drPencilcode}

\texttt{git remote add other https://github.com/jemole/drScratch/}

\texttt{git fetch other}

\texttt{git diff --shortstat other/master}


\begin{figure}[H]
   \centering
   \includegraphics[width=12cm, keepaspectratio]{img/diff.png}
   \caption{Número total de modificaciones}
   \label{fig:diff}
\end{figure}

En la \textit{Figura \ref{fig:diff}} se puede observar el número de documentos y ficheros que se han modificado en todo el proyecto así como la cantidad de inserciones y supresiones.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% RESULTADOS %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Resultados}

Una vez explicadas las tecnologías utilizadas para el desarrollo de la web y todas las funcionalidades que ésta dispone, es importante dejar claro cómo funciona la herramienta, qué información recibe el aprendiz del análisis de sus proyectos y qué puede hacer con dicha información, en definitiva, qué ofrece Dr. Pencilcode. Por ello, en este capítulo, se simularán distintas situaciones ejemplo de análisis de proyectos para observar el resultado.\newline

El primer programa a analizar es el mostrado en la \textit{Figura \ref{fig:ejemplo1}}. Se trata de un ejemplo sencillo por lo que se espera que la puntuación alcanzada no sea demasiado alta. El código hace que la tortuga dibuje una flor y luego la rellene de color naranja.

\begin{figure}[H]
  \centering
  \includegraphics[width=12cm, keepaspectratio]{img/flor1.png}
  \caption{Programa Ejemplo 1}
  \label{fig:ejemplo1}
\end{figure}


Una vez introducida la URL del programa en la herramienta, el resultado obtenido y el que se muestra en la página \texttt{dashboard.html} tras realizar el análisis es el mostrado a continuación:

\begin{figure}[H]
  \centering
  \includegraphics[width=12cm, keepaspectratio]{img/analisisflor1.png}
  \caption{Análisis Ejemplo 1}
  \label{fig:analisisejemplo1}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/detailsflor1.png}
  \caption{Sección Details Ejemplo 1}
  \label{fig:detailsejemplo1}
\end{figure}


Con la información que se muestra por pantalla, el usuario tiene la opción de investigar y navegar por cada una de las secciones del dashboard.  Se puede observar que la puntuación del proyecto es de 4 debido a la escasez de bloques utilizados. 
La sección \textit{What can you improve?} da consejos sobre como mejorar tu programa; en este caso, hace hincapié en trabajar las categorías de Operators, Text y Sound y anima al usuario a conseguir todos los Bonus.\newline

Si el usuario no sabe como mejorar su código, éste puede pinchar en los enlaces de las categorías que conducen a las páginas de ayuda; en ellas, puede encontrar ejemplos de varios programas donde se explica como utilizar los bloques, así como diversas tablas donde se indican los niveles a los que pertenece cada bloque. Por ejemplo, en la página de ayuda de la categoría \textbf{Control} se incluye un ejemplo de como llegar al nivel 3 de la misma mediante el uso de funciones. Véase la \textit{Figura \ref{fig:level3control}}.

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/controll3.png}
  \caption{Nivel 3 de Control}
  \label{fig:level3control}
\end{figure}

Una vez que se han consultado las páginas de ayuda, el usuario puede regresar al código de su proyecto para seguir mejorándolo. Para mejorar el programa Ejemplo 1, se han añadido los bloques de: función -$>$ (nivel 3 de Operators), click (nivel 3 de Control), jumpto (nivel 3 de Move)... Ahora, la tortuga dibuja flores de colores aleatorios en las coordenadas donde el usuario hace click con el ratón, \textit{Figura \ref{fig:ejemplo2}}.

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/flor2.png}
  \caption{Programa Ejemplo 2}
  \label{fig:ejemplo2}
\end{figure}

Una vez añadidos los bloques convenientes, se vuelve a analizar el proyecto. El nuevo resultado es el que se muestra en las \textit{Figuras \ref{fig:analisisejemplo2} y \ref{fig:detailsejemplo2}}.


\begin{figure}[H]
  \centering
  \includegraphics[width=16cm, keepaspectratio]{img/analisisflor2.png}
  \caption{Análisis Ejemplo 2}
  \label{fig:analisisejemplo2}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=14cm, keepaspectratio]{img/detailsflor2.png}
  \caption{Sección Details Ejemplo 2}
  \label{fig:detailsejemplo2}
\end{figure}

Como se puede observar, la puntuación del programa ha pasado de 4 a 13. Además de mejorar las puntuaciones específicas de 3 categorías, se han conseguido Bonus por diversidad, complejidad y repetición de bloque. Aun así, el usuario podría seguir mejorando el código añadiendo bloques de Text y Sonido como se indica en la sección \textit{What can you improve?}.

\begin{figure}[H]
  \centering
  \includegraphics[width=12cm, keepaspectratio]{img/flowerscertif.png}
  \caption{Certificado Ejemplo 2}
  \label{fig:certifejemplo2}
\end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% CONCLUSIONES %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\chapter{Conclusiones}
\label{chap:conclusiones}


En esta sección hablaré sobre los objetivos que se han logrado alcanzar y los que no durante el desarrollo de la aplicación, explicando el motivo por el cual, estos últimos, no han podido llevarse a cabo. Además, realizaré una pequeña reflexión sobre todo lo que este proyecto me ha aportado y como lo aprendido a lo largo de la carrera ha sido de gran utilidad para el desarollo del mismo. Finalmente, indicaré nuevas funcionalidades que podrían incluirse, en un futuro, para mejorar la plataforma y aportaré una breve valoración personal.


\section{Consecución de objetivos}
\label{sec:consecucion-objetivos}

En primer lugar, el objetivo general de este proyecto era crear una aplicación web capaz de analizar los programas escritos en Pencil Code (CoffeeScript) a la par que se daba soporte y consejos para que los usuarios siguieran mejorando sus habilidades como programadores. A pesar de que la herramienta no ha sido probada en aulas reales, se puede decir que este objetivo sí se ha cumplido.

En cuanto a los objetivos específicos:
 
\begin{itemize}

\item \textbf{Adaptación de la implementación básica a Pencil Code}. Como se ha ido mostrando en los diferentes capítulos de la memoria, este objetivo se ha alcanzado con creces. Para llegar a ello, se han tenido que realizar numerosas modificaciones en el código de Dr.Scratch además de incluir nuevas funciones. 

\item \textbf{Creación de un Plugin.} Ligado al primer objetivo. Para poder realizar el análisis de los programas Pencil Code se tuvo que crear el plugin \texttt{Coffee-mastery.py} encargado de ofrecer información sobre los bloques utilizado y las puntuaciones; objetivo que también se ha cumplido.

\item \textbf{Añadir nuevas funcionalidades y secciones a la página web}. En este objetivo no se especificó un número concreto de adiciones. Las novedades que se llevaron a cabo para alcanzar dicho objetivo fueron: la implementación de un formulario, el diseño de 9 páginas de ayuda, la inserción de bonus y el cambio de apariencia del dashboard incluyendo 3 nuevas secciones.  

\item \textbf{Aplicación en producción}. Con gran esfuerzo y después de varios intentos, se consiguió subir la web al servidor. A pesar de haber estado disponible durante todo este tiempo, no ha sido posible completar al 100$\%$ este objetivo debido a que la aplicación no ha sido probada todavía por ningún usuario y, por lo tanto, no se ha recibido ningún tipo de retroalimentación por parte de ellos.
La idea principal era que, una vez terminada la web, los alumnos de Yana probaran nuestra plataforma ya que, al fin y al cabo, son ellos los que trabajan con Pencil Code.
Al terminar el desarrollo, nos pusimos en contacto con Yana pero, por desgracia, no obtuvimos respuesta a tiempo para poder incluir sus resultados en esta memoria.

\end{itemize}


\section{Aplicación de lo aprendido}
\label{sec:aplicacion}

A medida que he ido trabajando y avanzando en el proyecto, he sido testigo del valor de los conocimientos adquiridos en las asignaturas cursadas a lo largo de la carrera. Este proyecto ha sido un claro ejemplo de ello ya que, durante su desarrollo, he aplicado gran parte de lo aprendido en asignaturas como:

\begin{enumerate}

\item \textbf{Informática I:} me permitió un primer contacto con el mundo de la programación, gracias a ella, aprendí, desde cero, las técnicas y conceptos básicos de la programación de computadores. Qué era una función, qué era un procedimiento, un bucle, un array, una condición, etc. Términos que han sido necesarios para poder llevar a cabo este proyecto. 

\item \textbf{Informática II:} Al igual que Informática I, esta asignatura continuó con mi formación como programadora, aunque el lenguaje con el que trabajé fue Ada y no el utilizado en este proyecto (Python), fue muy útil para seguir mejorando mis habilidades y conocimientos.

\item \textbf{Arquitectura de Internet:} fue la primera que cursé sobre el campo de las Redes de Ordenadores e Internet. En concreto, la asignatura me enseñó cómo está estructurada la red, así como las arquitecturas de los principales protocolos de redes de ordenadores.

\item \textbf{Sistemas Telemáticos para Medios Audiovisuales:} siguiendo con los protocolos, aquí conocí el funcionamiento del protocolo HTTP, entre otros.
\item \textbf{Protocolos para la transmisión de Audio y Vídeo en Internet:} fundamental para la realización de este proyecto ya que fue aquí donde aprendí a programar en Python y gracias a la cual he podido llevar un seguimiento más sencillo en el desarrollo del fichero views.py.

\item \textbf{Construcción de Servicios y Aplicaciones Audiovisuales en Internet:} En la cual, adquirí los conocimientos básicos de HTML, CSS y JavaScript, todos ellos empleados en el desarrollo de Dr.Pencilcode.

\item \textbf{Gráficos y visualización en 3D:} Aunque ésta estaba orientada a la creación de videojuegos tanto en 2D como 3D, los lenguajes utilizados para ello fueron WebGL y Javascript, lo que me permitió seguir puliendo mi pensamiento computacional.

\end{enumerate}


\section{Lecciones aprendidas}
\label{sec:lecciones_aprendidas}

Con el desarrollo de Dr.Pencilcode he conseguido ampliar y mejorar los conocimientos adquiridos durante la carrera además de aprender otros totalmente nuevos. 
Entre ellos cabe destacar el aprendizaje de nuevas tecnologías - nunca antes vistas - como por ejemplo:


\begin{enumerate}

\item \textbf{Django} es la base de este proyecto, para poder llevarlo acabo ha sido necesario informarse y profundizar en este framework de desarrollo web desde cero.

\item \textbf{Diseño gráfico web}: Además de ampliar mis conocimientos de HTML y CSS como desarrolladora de front-end, también he aprendido a utilizar \textbf{Bootstrap} y \textbf{jQuery} para añadir mayor interacción, usabilidad y dinamismo a mis páginas web, dándoles un aire más profesional.

\item \textbf{Bases de datos}: Gracias a Dr.Pencilcode he aprendido a trabajar con bases de datos con sistemas como \textbf{MySQL} o \textbf{Sqlite} con el fin de guardar y gestionar la información de los usuarios que utilizan la aplicación para el análisis de sus proyectos.

\item \textbf{Conceptos avanzados de Python}: A medida que el proyecto iba avanzando, he mejorado mis habilidades de programadora en Python utilizando nuevas estructuras y nuevos módulos como \textit{sets} y \textit{expresiones regulares} (regex).

\item \textbf{Servidor Apache y maquinas virtuales.} Nunca antes había subido una web a un servidor por lo que, al igual que con Django, tuve que aprender de forma autodidacta a instalar y configurar el servidor web Apache.

\end{enumerate}

No todo lo aprendido está relacionado con las tecnologías. Participar en este proyecto, ligado a \textit{Scratch} y \textit{Dr.Scratch}, me dio la oportunidad de formar parte de diversos talleres orientados a niños y personas con discapacidad donde daba soporte y consejos sobre programación.\newline 

Con esto, entra en juego un nuevo concepto que nunca antes había escuchado, el \textbf{pensamiento computacional}. He descubierto que con ayuda de los conceptos básicos de la programación es posible aprender a resolver problemas de la vida cotidiana, analizando la información, organizándola, identificando posibles soluciones de forma algorítmica (pasos ordenados), etc. La introducción de la programación en la educación promueve el desarrollo del pensamiento computacional.\newline

Estos eventos, escasos pero intensos, me ayudaron a desenvolverme un poco más como persona e impulsaron mi deseo de seguir creciendo con este proyecto con el fin de enseñar lo útil que puede llegar a ser la programación en la enseñanza.\newline


\begin{figure}[H]
   \centering
   \includegraphics[width=12cm, keepaspectratio]{img/FICOD.jpeg}
   \caption{Taller de superprogramadores en FICOD}
   \label{figure:FICOD}
\end{figure}

Por último, he aprendido a realizar evaluaciones objetivas de los proyectos analizados. Quizás, esta parte es la que más tiempo me ha llevado pues la creación de una \textbf{rúbrica}, la evaluación de una tarea, engloba numerosas variables que hay que tener en cuenta. Esta tarea me ha ayudado a ver las cosas desde el punto de vista del docente y no del alumno.


\section{Trabajos futuros}
\label{sec:trabajos_futuros}

Existen muchas funcionalidades que podrían añadirse a Dr.Pencilcode para que fuera una herramienta más completa y óptima, algunas de ellas podrían ser:

\begin{enumerate}

\item \textbf{Traducción a otros idiomas}. Actualmente, Dr. Pencilcode solo se encuentra disponible en inglés por lo que una buena opción sería traducir la plataforma a más idiomas como, por ejemplo, el castellano.

\item Una forma para seguir mejorando la plataforma sería añadir \textbf{cuentas de usuario}; con ellas, el usuario podría hacer un seguimiento de sus puntuaciones, sus proyectos analizados y su progreso y evolución como programador.

\item \textbf{Añadir nuevos bonus y medallas}. Estaría bien incluir en la rúbrica actual nuevos bonus y medallas teniendo en cuenta más aspectos del código y combinaciones de los bloques. 

\item Muy similar al punto anterior, se podría añadir un \textbf{sistema de mini-retos} para tener un incentivo extra y hacer más divertida y amena la programación. 

\item \textbf{Mejorar el plugin coffee-mastery}. En lugar de tratar los bonus en el fichero \texttt{views.py} se deberían calcular todas las puntuaciones en dicho plug-in.

\item Por último, una buena vía para comprobar que Dr. Pencilcode cumple su labor y da buenos resultados, sería llevar la \textbf{plataforma a las aulas} españolas aunque, para poder realizarlo, sería necesario que Pencil Code se popularizará en nuestro país.

\end{enumerate}

\section{Valoración personal}
\label{sec:valoracion}

He tenido la suerte de elegir una carrera con un amplio abanico de posibilidades. Sin embargo, me ha llevado más de 5 años saber lo que realmente me motiva y mi decisión final se la debo, en gran parte, a este proyecto.
Con el desarrollo de Dr. Pencilcode me he dado cuenta de que la programación es lo que verdaderamente me gusta pero, sobretodo, el hecho de poder ayudar a otras personas con ella y la gratificación y la satisfacción que eso conlleva.

Se cierra una etapa de mi vida para dar comienzo a otras nuevas, de las que estoy segura que me ayudarán a formarme para llegar a ser una buena programadora.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% APÉNDICE(S) %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage
\appendix
\chapter{Información Extra}
\section{E-mails con Yana}
\label{app:emails}

En este anexo se muestran algunos de los e-mails que se intercambiaron con David Bau y Yana Malysheva sobre el desarrollo de Dr.Pencilcode


\begin{figure}[H]
   \centering
   \includegraphics[width=14cm, keepaspectratio]{img/DavidBau.png}
   \caption{E-mail David Bau}
   \label{figure:bau}
\end{figure}


\begin{figure}[H]
   \centering
   \includegraphics[width=12cm, keepaspectratio]{img/Yana1email.png}
   \caption{Primer e-mail de Yana}
   \label{figure:mail1yana}
\end{figure}


\begin{figure}[H]
   \centering
   \includegraphics[width=14cm, keepaspectratio]{img/fase1mail.png}
   \caption{E-mail sobre las categorías de la Fase I}
   \label{figure:mailcategorias}
\end{figure}


\begin{figure}[H]
   \centering
   \includegraphics[width=12cm, keepaspectratio]{img/helpagesmail.png}
   \caption{E-mail sobre las páginas de ayuda}
   \label{figure:mailhelp}
\end{figure}


\begin{figure}[H]
   \centering
   \includegraphics[width=12cm, keepaspectratio]{img/emailsurvey.png}
   \caption{E-mail sobre el formulario}
   \label{figure:mailsurvey}
\end{figure}



\section{Formulario Dr. Pencilcode}
\label{app:formulario}

Aquí se muestra el primer formulario a papel que se hizo de Dr. Pencilcode.

\includepdf[pages=1-2, width=\textwidth]{docs/Survey.pdf}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% BIBLIOGRAFIA %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage

% Las siguientes dos instrucciones es todo lo que necesitas
% para incluir las citas en la memoria
\bibliographystyle{abbrv}
\bibliography{memoria}  % memoria.bib es el nombre del fichero que contiene
% las referencias bibliográficas. Abre ese fichero y mira el formato que tiene,
% que se conoce como BibTeX. Hay muchos sitios que exportan referencias en
% formato BibTeX. Prueba a buscar en http://scholar.google.com por referencias
% y verás que lo puedes hacer de manera sencilla.
% Más información: 
% http://texblog.org/2014/04/22/using-google-scholar-to-download-bibtex-citations/

\end{document}
